{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-15T01:25:56.694358Z",
          "start_time": "2025-07-15T01:25:56.655734Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:08:17.598027Z",
          "iopub.execute_input": "2026-01-02T14:08:17.598114Z",
          "iopub.status.idle": "2026-01-02T14:08:18.332850Z",
          "shell.execute_reply": "2026-01-02T14:08:18.332563Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "# Class switching example 2\n# Example of class switching controlled by a reducible Markov chain\nmodel = Network('mm1cs')",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-15T01:25:56.937079Z",
          "start_time": "2025-07-15T01:25:56.915361Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:08:18.333943Z",
          "iopub.execute_input": "2026-01-02T14:08:18.334113Z",
          "shell.execute_reply": "2026-01-02T14:08:18.339816Z",
          "iopub.status.idle": "2026-01-02T14:08:18.340168Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Block 1: nodes\nnode = np.empty(5, dtype=object)\nnode[0] = Source(model, 'Source 1')\nnode[1] = Queue(model, 'Queue 0', SchedStrategy.FCFS)\nnode[2] = Queue(model, 'Queue 1', SchedStrategy.FCFS)\nnode[3] = Queue(model, 'Queue 2', SchedStrategy.FCFS)\nnode[4] = Sink(model, 'Sink 1')\n\n# Block 2: classes\njobclass = np.empty(3, dtype=object)\njobclass[0] = OpenClass(model, 'Class1', 0)\njobclass[1] = OpenClass(model, 'Class2', 0)\njobclass[2] = OpenClass(model, 'Class3', 0)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-15T01:25:57.231780Z",
          "start_time": "2025-07-15T01:25:57.188926Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:08:18.341120Z",
          "iopub.execute_input": "2026-01-02T14:08:18.341248Z",
          "shell.execute_reply": "2026-01-02T14:08:18.349315Z",
          "iopub.status.idle": "2026-01-02T14:08:18.349614Z"
        }
      },
      "outputs": [],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# Service configurations\nnode[0].set_arrival(jobclass[0], Exp.fit_mean(1.000000))   # (Source 1,Class1)\nnode[1].set_service(jobclass[0], Exp.fit_mean(10.000000))  # (Queue 0,Class1)\nnode[2].set_service(jobclass[1], Exp.fit_mean(20.000000))  # (Queue 1,Class2)\nnode[3].set_service(jobclass[2], Exp.fit_mean(30.000000))  # (Queue 2,Class3)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-15T01:25:57.814480Z",
          "start_time": "2025-07-15T01:25:57.785394Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:08:18.350811Z",
          "iopub.execute_input": "2026-01-02T14:08:18.350938Z",
          "shell.execute_reply": "2026-01-02T14:08:18.356431Z",
          "iopub.status.idle": "2026-01-02T14:08:18.356895Z"
        }
      },
      "outputs": [],
      "execution_count": 4
    },
    "cell_4": {
      "cell_type": "code",
      "source": "# Routing matrix with class switching\nP = model.init_routing_matrix()  # initialize routing matrix\nP.set(jobclass[0], jobclass[0], node[0], node[1], 1.0)\nP.set(jobclass[0], jobclass[0], node[1], node[1], 0.2)\nP.set(jobclass[0], jobclass[1], node[1], node[2], 0.3)\nP.set(jobclass[0], jobclass[2], node[1], node[3], 0.5)\nP.set(jobclass[1], jobclass[1], node[2], node[4], 1.0)\nP.set(jobclass[2], jobclass[2], node[3], node[4], 1.0)\nmodel.link(P)\n#model.printRoutingMatrix()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-15T01:25:58.340822Z",
          "start_time": "2025-07-15T01:25:58.306075Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:08:18.358403Z",
          "iopub.execute_input": "2026-01-02T14:08:18.358566Z",
          "shell.execute_reply": "2026-01-02T14:08:18.369531Z",
          "iopub.status.idle": "2026-01-02T14:08:18.369831Z"
        }
      },
      "outputs": [],
      "execution_count": 5
    },
    "cell_5": {
      "cell_type": "code",
      "source": "# Solve\nsolver = MVA(model)\nAvgTable = solver.avg_chain_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-15T01:25:58.828782Z",
          "start_time": "2025-07-15T01:25:58.636404Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:08:18.371073Z",
          "iopub.execute_input": "2026-01-02T14:08:18.371215Z",
          "iopub.status.idle": "2026-01-02T14:08:18.510438Z",
          "shell.execute_reply": "2026-01-02T14:08:18.510127Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "    Station   Chain  QLen  Util  RespT  ResidT   ArvR   Tput\n0  Source 1  Chain1   0.0   0.0    0.0     0.0  0.000  1.000\n1   Queue 0  Chain1   0.0   0.0    0.0     0.0  1.250  1.250\n2   Queue 1  Chain1   0.0   0.0    0.0     0.0  0.375  0.375\n3   Queue 2  Chain1   0.0   0.0    0.0     0.0  0.625  0.625\n",
            "numerical_values": [
              0.0,
              1.0,
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.0,
              1.0,
              0.0,
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.25,
              1.25,
              2.0,
              1.0,
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.375,
              0.375,
              3.0,
              2.0,
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.625,
              0.625
            ]
          }
        }
      ],
      "execution_count": 6
    }
  },
  "numerical_summary": {
    "cell_1": [
      2.0,
      1.0
    ],
    "cell_5": [
      0.0,
      1.0,
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.0,
      1.0,
      0.0,
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.25,
      1.25,
      2.0,
      1.0,
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.375,
      0.375,
      3.0,
      2.0,
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.625,
      0.625
    ]
  },
  "metadata": {
    "notebook_path": "classSwitching/cs_multi_diamond.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 6,
    "code_cells": 6,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}