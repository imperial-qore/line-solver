{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:21:44.199312Z",
          "start_time": "2025-07-30T22:21:43.265760Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:12:02.019631Z",
          "iopub.execute_input": "2026-01-02T14:12:02.019724Z",
          "iopub.status.idle": "2026-01-02T14:12:02.789000Z",
          "shell.execute_reply": "2026-01-02T14:12:02.788736Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "model = Network('model')\n\nM = 4\n# Create 4 single-server queues with FCFS scheduling\nnode = np.empty(4, dtype=object)\nnode[0] = Queue(model, 'Queue1', SchedStrategy.FCFS)\nnode[1] = Queue(model, 'Queue2', SchedStrategy.FCFS)\nnode[2] = Queue(model, 'Queue3', SchedStrategy.FCFS)\nnode[3] = Queue(model, 'Queue4', SchedStrategy.FCFS)  # only closed classes\n\nsource = Source(model, 'Source')\nsink = Sink(model, 'Sink')\n\n# Create job classes\njobclass = np.empty(2, dtype=object)\njobclass[0] = ClosedClass(model, 'ClosedClass', 100, node[0], 0)\njobclass[1] = OpenClass(model, 'OpenClass', 0)\n\n# Set service rates\nfor i in range(M):\n    node[i].set_service(jobclass[0], Exp(i+1))\n    node[i].set_service(jobclass[1], Exp(np.sqrt(i+1)))\n\n# Set arrival rate for open class using APH distribution\nsource.set_arrival(jobclass[1], APH.fit_mean_and_scv(3, 64))",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:21:44.269904Z",
          "start_time": "2025-07-30T22:21:44.248509Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:12:02.790236Z",
          "iopub.execute_input": "2026-01-02T14:12:02.790400Z",
          "shell.execute_reply": "2026-01-02T14:12:02.811674Z",
          "iopub.status.idle": "2026-01-02T14:12:02.812013Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Setup routing matrix\nM = model.get_number_of_stations()\nK = model.get_number_of_classes()\n\nP = model.init_routing_matrix()\n\n# Closed class routing: Queue1 -> Queue2 -> Queue3 -> Queue4 -> Queue1 (circular)\nP.set(jobclass[0], jobclass[0], node[0], node[1], 1.0)\nP.set(jobclass[0], jobclass[0], node[1], node[2], 1.0)\nP.set(jobclass[0], jobclass[0], node[2], node[3], 1.0)\nP.set(jobclass[0], jobclass[0], node[3], node[0], 1.0)\n\n# Open class routing: Source -> Queue1 -> Queue2 -> Queue3 -> Sink (excludes Queue4)\nP.set(jobclass[1], jobclass[1], source, node[0], 1.0)\nP.set(jobclass[1], jobclass[1], node[0], node[1], 1.0)\nP.set(jobclass[1], jobclass[1], node[1], node[2], 1.0)\nP.set(jobclass[1], jobclass[1], node[2], sink, 1.0)\n\nmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:21:44.310416Z",
          "start_time": "2025-07-30T22:21:44.298200Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:12:02.813269Z",
          "iopub.execute_input": "2026-01-02T14:12:02.813390Z",
          "shell.execute_reply": "2026-01-02T14:12:02.820458Z",
          "iopub.status.idle": "2026-01-02T14:12:02.820744Z"
        }
      },
      "outputs": [],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "print('This example shows the execution of the solver on a 2-class mixed model with 4 single server nodes.')\n\n# Create solvers\nsolver = np.array([], dtype=object)\n# Note: CTMC is infinite on this model due to high population so omitted CTMC and SSA\nsolver = np.append(solver, JMT(model, cutoff=3, keep=False, verbose=True, seed=23000, samples=20000))\n#solver = np.append(solver, FLD(model, keep=False, verbose=True, seed=23000)) #TODO Fluid is very slow\nsolver = np.append(solver, MVA(model, method='lin', keep=False, verbose=True, seed=23000))\nsolver = np.append(solver, NC(model, keep=False, verbose=True, seed=23000))\n# Note: MAM does not support mixed models with both open and closed classes\nsolver = np.append(solver, DES(model, cutoff=3, keep=False, verbose=True, seed=23000, samples=20000))\n\n# Solve and display results\nAvgTable = np.empty(len(solver), dtype=object)\nfor s in range(len(solver)):\n    print(f'\\nSOLVER: {solver[s].get_name()}')\n    AvgTable[s] = solver[s].avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:21:47.411672Z",
          "start_time": "2025-07-30T22:21:44.348430Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:12:02.821720Z",
          "iopub.execute_input": "2026-01-02T14:12:02.821857Z",
          "shell.execute_reply": "2026-01-02T14:12:05.974146Z",
          "iopub.status.idle": "2026-01-02T14:12:05.974473Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "This example shows the execution of the solver on a 2-class mixed model with 4 single server nodes.\n\nSOLVER: SolverJMT\nJMT Model: /tmp/workspace/jsim/15819045368269406612/jmodel.jsim\n",
            "numerical_values": [
              2.0,
              4.0,
              1.5819045368269406e+19
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Station     JobClass     QLen    Util     RespT    ResidT    ArvR    Tput\n0  Queue1  ClosedClass  98.4400  0.6812  143.7537  143.7537  0.6927  0.6887\n1  Queue1    OpenClass  56.6240  0.2977  187.5381  187.5381  0.3042  0.3047\n2  Queue2  ClosedClass   0.8707  0.3381    1.2547    1.2547  0.6887  0.6886\n3  Queue2    OpenClass   0.5367  0.1911    1.7508    1.7508  0.3047  0.3047\n4  Queue3  ClosedClass   0.4373  0.2063    0.6263    0.6263  0.6886  0.6927\n5  Queue3    OpenClass   0.2972  0.1808    0.9696    0.9696  0.3047  0.2954\n6  Queue4  ClosedClass   0.2189  0.1596    0.3142    0.3142  0.6927  0.6927\n7  Source    OpenClass   0.0000  0.0000    0.0000    0.0000  0.0000  0.3042\n\nSOLVER: SolverMVA\n  Station     JobClass     QLen    Util     RespT    ResidT    ArvR    Tput\n0  Queue1  ClosedClass  98.5326  0.6644  148.3136  148.3136  0.6644  0.6644\n1  Queue1    OpenClass  49.7663  0.3333  149.2989  149.2989  0.3333  0.3333\n2  Queue2  ClosedClass   0.8388  0.3322    1.2626    1.2626  0.6644  0.6644\n3  Queue2    OpenClass   0.4913  0.2357    1.4739    1.4739  0.3333  0.3333\n4  Queue3  ClosedClass   0.4298  0.2215    0.6469    0.6469  0.6644  0.6644\n5  Queue3    OpenClass   0.2974  0.1925    0.8923    0.8923  0.3333  0.3333\n6  Queue4  ClosedClass   0.1988  0.1661    0.2992    0.2992  0.6644  0.6644\n7  Source    OpenClass   0.0000  0.0000    0.0000    0.0000  0.0000  0.3333\n\nSOLVER: SolverNC\n",
            "numerical_values": [
              0.0,
              1.0,
              98.44,
              0.6812,
              143.7537,
              143.7537,
              0.6927,
              0.6887,
              1.0,
              1.0,
              56.624,
              0.2977,
              187.5381,
              187.5381,
              0.3042,
              0.3047,
              2.0,
              2.0,
              0.8707,
              0.3381,
              1.2547,
              1.2547,
              0.6887,
              0.6886,
              3.0,
              2.0,
              0.5367,
              0.1911,
              1.7508,
              1.7508,
              0.3047,
              0.3047,
              4.0,
              3.0,
              0.4373,
              0.2063,
              0.6263,
              0.6263,
              0.6886,
              0.6927,
              5.0,
              3.0,
              0.2972,
              0.1808,
              0.9696,
              0.9696,
              0.3047,
              0.2954,
              6.0,
              4.0,
              0.2189,
              0.1596,
              0.3142,
              0.3142,
              0.6927,
              0.6927,
              7.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.3042,
              0.0,
              1.0,
              98.5326,
              0.6644,
              148.3136,
              148.3136,
              0.6644,
              0.6644,
              1.0,
              1.0,
              49.7663,
              0.3333,
              149.2989,
              149.2989,
              0.3333,
              0.3333,
              2.0,
              2.0,
              0.8388,
              0.3322,
              1.2626,
              1.2626,
              0.6644,
              0.6644,
              3.0,
              2.0,
              0.4913,
              0.2357,
              1.4739,
              1.4739,
              0.3333,
              0.3333,
              4.0,
              3.0,
              0.4298,
              0.2215,
              0.6469,
              0.6469,
              0.6644,
              0.6644,
              5.0,
              3.0,
              0.2974,
              0.1925,
              0.8923,
              0.8923,
              0.3333,
              0.3333,
              6.0,
              4.0,
              0.1988,
              0.1661,
              0.2992,
              0.2992,
              0.6644,
              0.6644,
              7.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.3333
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Station     JobClass     QLen    Util     RespT    ResidT    ArvR    Tput\n0  Queue1  ClosedClass  98.6212  0.6671  147.8296  147.8296  0.6671  0.6671\n1  Queue1    OpenClass  49.8106  0.3333  149.4317  149.4317  0.3333  0.3333\n2  Queue2  ClosedClass   0.7829  0.3341    1.1735    1.1735  0.6671  0.6671\n3  Queue2    OpenClass   0.5483  0.2352    1.6448    1.6448  0.3333  0.3333\n4  Queue3  ClosedClass   0.3884  0.2224    0.5823    0.5823  0.6671  0.6671\n5  Queue3    OpenClass   0.3308  0.1924    0.9923    0.9923  0.3333  0.3333\n6  Queue4  ClosedClass   0.2075  0.1668    0.3111    0.3111  0.6671  0.6671\n7  Source    OpenClass   0.0000  0.0000    0.0000    0.0000  0.0000  0.3333\n\nSOLVER: SolverDES\nDES: Transient filter = mser5 (batch size = 5)\nDES: CI method = obm (overlap = 0.5)\nDES events:    400 \b\b\b\b\b\b\b    800\b\b\b\b\b\b\b   1200\b\b\b\b\b\b\b   1600\b\b\b\b\b\b\b   2000\b\b\b\b\b\b\b   2400\b\b\b\b\b\b\b   2800\b\b\b\b\b\b\b   3200\b\b\b\b\b\b\b   3600\b\b\b\b\b\b\b   4000\b\b\b\b\b\b\b   4400\b\b\b\b\b\b\b   4800\b\b\b\b\b\b\b   5200\b\b\b\b\b\b\b   5600\b\b\b\b\b\b\b   6000\b\b\b\b\b\b\b   6400\b\b\b\b\b\b\b   6800\b\b\b\b\b\b\b   7200\b\b\b\b\b\b\b   7600\b\b\b\b\b\b\b   8000\b\b\b\b\b\b\b   8400\b\b\b\b\b\b\b   8800\b\b\b\b\b\b\b   9200\b\b\b\b\b\b\b   9600\b\b\b\b\b\b\b  10000\b\b\b\b\b\b\b  10400\b\b\b\b\b\b\b  10800\b\b\b\b\b\b\b  11200\b\b\b\b\b\b\b  11600\b\b\b\b\b\b\b  12000\b\b\b\b\b\b\b  12400\b\b\b\b\b\b\b  12800\b\b\b\b\b\b\b  13200\b\b\b\b\b\b\b  13600\b\b\b\b\b\b\b  14000\b\b\b\b\b\b\b  14400\b\b\b\b\b\b\b  14800\b\b\b\b\b\b\b  15200\b\b\b\b\b\b\b  15600\b\b\b\b\b\b\b  16000\b\b\b\b\b\b\b  16400\b\b\b\b\b\b\b  16800\b\b\b\b\b\b\b  17200\b\b\b\b\b\b\b  17600\b\b\b\b\b\b\b  18000\b\b\b\b\b\b\b  18400\b\b\b\b\b\b\b  18800\b\b\b\b\b\b\b  19200\b\b\b\b\b\b\b  19600\b\b\b\b\b\b\b  20000\b\b\b\b\b\b\b  20000\n  Station     JobClass     QLen    Util     RespT    ResidT    ArvR    Tput\n0  Queue1  ClosedClass  98.1533  0.6975  134.6379  134.6379  0.7215  0.7215\n1  Queue1    OpenClass  53.8848  0.3025  182.5057  182.5057  0.3333  0.3084\n2  Queue2  ClosedClass   1.0179  0.3686    1.2165    1.2165  0.7215  0.7213\n3  Queue2    OpenClass   0.5635  0.2210    1.7871    1.7871  0.3084  0.3082\n4  Queue3  ClosedClass   0.5345  0.2369    0.6083    0.6083  0.7213  0.7215\n5  Queue3    OpenClass   0.3286  0.1742    0.9965    0.9965  0.3082  0.3082\n6  Queue4  ClosedClass   0.2942  0.1844    0.3324    0.3324  0.7215  0.7215\n7  Source    OpenClass   0.0000  0.0000    0.0000    0.0000  0.0000  0.3333\n",
            "numerical_values": [
              0.0,
              1.0,
              98.6212,
              0.6671,
              147.8296,
              147.8296,
              0.6671,
              0.6671,
              1.0,
              1.0,
              49.8106,
              0.3333,
              149.4317,
              149.4317,
              0.3333,
              0.3333,
              2.0,
              2.0,
              0.7829,
              0.3341,
              1.1735,
              1.1735,
              0.6671,
              0.6671,
              3.0,
              2.0,
              0.5483,
              0.2352,
              1.6448,
              1.6448,
              0.3333,
              0.3333,
              4.0,
              3.0,
              0.3884,
              0.2224,
              0.5823,
              0.5823,
              0.6671,
              0.6671,
              5.0,
              3.0,
              0.3308,
              0.1924,
              0.9923,
              0.9923,
              0.3333,
              0.3333,
              6.0,
              4.0,
              0.2075,
              0.1668,
              0.3111,
              0.3111,
              0.6671,
              0.6671,
              7.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.3333,
              5.0,
              5.0,
              0.5,
              400.0,
              800.0,
              1200.0,
              1600.0,
              2000.0,
              2400.0,
              2800.0,
              3200.0,
              3600.0,
              4000.0,
              4400.0,
              4800.0,
              5200.0,
              5600.0,
              6000.0,
              6400.0,
              6800.0,
              7200.0,
              7600.0,
              8000.0,
              8400.0,
              8800.0,
              9200.0,
              9600.0,
              10000.0,
              10400.0,
              10800.0,
              11200.0,
              11600.0,
              12000.0,
              12400.0,
              12800.0,
              13200.0,
              13600.0,
              14000.0,
              14400.0,
              14800.0,
              15200.0,
              15600.0,
              16000.0,
              16400.0,
              16800.0,
              17200.0,
              17600.0,
              18000.0,
              18400.0,
              18800.0,
              19200.0,
              19600.0,
              20000.0,
              20000.0,
              0.0,
              1.0,
              98.1533,
              0.6975,
              134.6379,
              134.6379,
              0.7215,
              0.7215,
              1.0,
              1.0,
              53.8848,
              0.3025,
              182.5057,
              182.5057,
              0.3333,
              0.3084,
              2.0,
              2.0,
              1.0179,
              0.3686,
              1.2165,
              1.2165,
              0.7215,
              0.7213,
              3.0,
              2.0,
              0.5635,
              0.221,
              1.7871,
              1.7871,
              0.3084,
              0.3082,
              4.0,
              3.0,
              0.5345,
              0.2369,
              0.6083,
              0.6083,
              0.7213,
              0.7215,
              5.0,
              3.0,
              0.3286,
              0.1742,
              0.9965,
              0.9965,
              0.3082,
              0.3082,
              6.0,
              4.0,
              0.2942,
              0.1844,
              0.3324,
              0.3324,
              0.7215,
              0.7215,
              7.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.3333
            ]
          }
        }
      ],
      "execution_count": 4
    }
  },
  "numerical_summary": {
    "cell_3": [
      2.0,
      4.0,
      1.5819045368269406e+19,
      0.0,
      1.0,
      98.44,
      0.6812,
      143.7537,
      143.7537,
      0.6927,
      0.6887,
      1.0,
      1.0,
      56.624,
      0.2977,
      187.5381,
      187.5381,
      0.3042,
      0.3047,
      2.0,
      2.0,
      0.8707,
      0.3381,
      1.2547,
      1.2547,
      0.6887,
      0.6886,
      3.0,
      2.0,
      0.5367,
      0.1911,
      1.7508,
      1.7508,
      0.3047,
      0.3047,
      4.0,
      3.0,
      0.4373,
      0.2063,
      0.6263,
      0.6263,
      0.6886,
      0.6927,
      5.0,
      3.0,
      0.2972,
      0.1808,
      0.9696,
      0.9696,
      0.3047,
      0.2954,
      6.0,
      4.0,
      0.2189,
      0.1596,
      0.3142,
      0.3142,
      0.6927,
      0.6927,
      7.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.3042,
      0.0,
      1.0,
      98.5326,
      0.6644,
      148.3136,
      148.3136,
      0.6644,
      0.6644,
      1.0,
      1.0,
      49.7663,
      0.3333,
      149.2989,
      149.2989,
      0.3333,
      0.3333,
      2.0,
      2.0,
      0.8388,
      0.3322,
      1.2626,
      1.2626,
      0.6644,
      0.6644,
      3.0,
      2.0,
      0.4913,
      0.2357,
      1.4739,
      1.4739,
      0.3333,
      0.3333,
      4.0,
      3.0,
      0.4298,
      0.2215,
      0.6469,
      0.6469,
      0.6644,
      0.6644,
      5.0,
      3.0,
      0.2974,
      0.1925,
      0.8923,
      0.8923,
      0.3333,
      0.3333,
      6.0,
      4.0,
      0.1988,
      0.1661,
      0.2992,
      0.2992,
      0.6644,
      0.6644,
      7.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.3333,
      0.0,
      1.0,
      98.6212,
      0.6671,
      147.8296,
      147.8296,
      0.6671,
      0.6671,
      1.0,
      1.0,
      49.8106,
      0.3333,
      149.4317,
      149.4317,
      0.3333,
      0.3333,
      2.0,
      2.0,
      0.7829,
      0.3341,
      1.1735,
      1.1735,
      0.6671,
      0.6671,
      3.0,
      2.0,
      0.5483,
      0.2352,
      1.6448,
      1.6448,
      0.3333,
      0.3333,
      4.0,
      3.0,
      0.3884,
      0.2224,
      0.5823,
      0.5823,
      0.6671,
      0.6671,
      5.0,
      3.0,
      0.3308,
      0.1924,
      0.9923,
      0.9923,
      0.3333,
      0.3333,
      6.0,
      4.0,
      0.2075,
      0.1668,
      0.3111,
      0.3111,
      0.6671,
      0.6671,
      7.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.3333,
      5.0,
      5.0,
      0.5,
      400.0,
      800.0,
      1200.0,
      1600.0,
      2000.0,
      2400.0,
      2800.0,
      3200.0,
      3600.0,
      4000.0,
      4400.0,
      4800.0,
      5200.0,
      5600.0,
      6000.0,
      6400.0,
      6800.0,
      7200.0,
      7600.0,
      8000.0,
      8400.0,
      8800.0,
      9200.0,
      9600.0,
      10000.0,
      10400.0,
      10800.0,
      11200.0,
      11600.0,
      12000.0,
      12400.0,
      12800.0,
      13200.0,
      13600.0,
      14000.0,
      14400.0,
      14800.0,
      15200.0,
      15600.0,
      16000.0,
      16400.0,
      16800.0,
      17200.0,
      17600.0,
      18000.0,
      18400.0,
      18800.0,
      19200.0,
      19600.0,
      20000.0,
      20000.0,
      0.0,
      1.0,
      98.1533,
      0.6975,
      134.6379,
      134.6379,
      0.7215,
      0.7215,
      1.0,
      1.0,
      53.8848,
      0.3025,
      182.5057,
      182.5057,
      0.3333,
      0.3084,
      2.0,
      2.0,
      1.0179,
      0.3686,
      1.2165,
      1.2165,
      0.7215,
      0.7213,
      3.0,
      2.0,
      0.5635,
      0.221,
      1.7871,
      1.7871,
      0.3084,
      0.3082,
      4.0,
      3.0,
      0.5345,
      0.2369,
      0.6083,
      0.6083,
      0.7213,
      0.7215,
      5.0,
      3.0,
      0.3286,
      0.1742,
      0.9965,
      0.9965,
      0.3082,
      0.3082,
      6.0,
      4.0,
      0.2942,
      0.1844,
      0.3324,
      0.3324,
      0.7215,
      0.7215,
      7.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.3333
    ]
  },
  "metadata": {
    "notebook_path": "mixedQN/mqn_singleserver_fcfs.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 4,
    "code_cells": 4,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}