{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:16:17.797622Z",
          "start_time": "2025-07-30T22:16:16.907570Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:07.332269Z",
          "iopub.execute_input": "2026-01-02T14:09:07.332358Z",
          "iopub.status.idle": "2026-01-02T14:09:08.134354Z",
          "shell.execute_reply": "2026-01-02T14:09:08.134068Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "# Fork-Join network example 5 - similar to example_forkJoin_1 but closed\nmodel = Network('model')",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:16:17.856339Z",
          "start_time": "2025-07-30T22:16:17.852562Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:08.135473Z",
          "iopub.execute_input": "2026-01-02T14:09:08.135658Z",
          "shell.execute_reply": "2026-01-02T14:09:08.141663Z",
          "iopub.status.idle": "2026-01-02T14:09:08.142007Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Create network\ndelay = Delay(model,'Delay')\nqueue1 = Queue(model,'Queue1',SchedStrategy.PS)\nqueue2 = Queue(model,'Queue2',SchedStrategy.PS)\nfork = Fork(model, 'Fork')\njoin = Join(model, 'Join', fork)\n\njobclass1 = ClosedClass(model, 'class1', 5, delay, 0)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:16:17.919789Z",
          "start_time": "2025-07-30T22:16:17.909610Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:08.142887Z",
          "iopub.execute_input": "2026-01-02T14:09:08.143000Z",
          "iopub.status.idle": "2026-01-02T14:09:08.151250Z",
          "shell.execute_reply": "2026-01-02T14:09:08.150898Z"
        }
      },
      "outputs": [],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# Service configurations\ndelay.set_service(jobclass1, Exp(1.0))\nqueue1.set_service(jobclass1, Exp(1.0))\nqueue2.set_service(jobclass1, Exp(1.0))",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:16:17.964281Z",
          "start_time": "2025-07-30T22:16:17.959656Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:08.152563Z",
          "iopub.execute_input": "2026-01-02T14:09:08.152729Z",
          "iopub.status.idle": "2026-01-02T14:09:08.158514Z",
          "shell.execute_reply": "2026-01-02T14:09:08.158224Z"
        }
      },
      "outputs": [],
      "execution_count": 4
    },
    "cell_4": {
      "cell_type": "code",
      "source": "# Set routing matrix\nP = model.init_routing_matrix()\nP.set(jobclass1, jobclass1, delay, fork, 1.0)\nP.set(jobclass1, jobclass1, fork, queue1, 1.0)\nP.set(jobclass1, jobclass1, fork, queue2, 1.0)\nP.set(jobclass1, jobclass1, queue1, join, 1.0)\nP.set(jobclass1, jobclass1, queue2, join, 1.0)\nP.set(jobclass1, jobclass1, join, delay, 1.0)\nmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:16:18.024250Z",
          "start_time": "2025-07-30T22:16:18.015450Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:08.159596Z",
          "iopub.execute_input": "2026-01-02T14:09:08.159714Z",
          "shell.execute_reply": "2026-01-02T14:09:08.167251Z",
          "iopub.status.idle": "2026-01-02T14:09:08.167584Z"
        }
      },
      "outputs": [],
      "execution_count": 5
    },
    "cell_5": {
      "cell_type": "code",
      "source": "# Solve with multiple methods\nsolvers = [JMT(model, seed=23000)]\n# Add MVA with specific options like MATLAB\noptions = MVA.default_options()\noptions.config.fork_join = 'ht'\noptions.method = 'amva'\nsolvers.append(MVA(model, options))\n\nfor i, solver in enumerate(solvers):\n    print(f'SOLVER {i+1}: {solver.get_name()}')\n    avgTable = solver.avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:16:19.336769Z",
          "start_time": "2025-07-30T22:16:18.070823Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:08.168799Z",
          "iopub.execute_input": "2026-01-02T14:09:08.168955Z",
          "iopub.status.idle": "2026-01-02T14:09:09.240635Z",
          "shell.execute_reply": "2026-01-02T14:09:09.240246Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "SOLVER 1: SolverJMT\nJMT Model: /tmp/workspace/jsim/1715575743751808832/jmodel.jsim\n",
            "numerical_values": [
              1.0,
              1.7155757437518088e+18
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Station JobClass    QLen    Util   RespT  ResidT    ArvR    Tput\n0   Delay   class1  0.8791  0.8791  0.9950  0.9950  0.8801  0.8764\n1  Queue1   class1  2.6764  0.8854  3.0212  1.5106  0.8764  0.8715\n2  Queue2   class1  2.6266  0.8860  3.0353  1.5177  0.8764  0.8728\n3    Join   class1  2.9037  0.0000  1.6797  1.6797  1.7657  0.8801\nSOLVER 2: SolverMVA\n  Station JobClass    QLen    Util   RespT  ResidT    ArvR    Tput\n0   Delay   class1  0.7669  0.7669  1.0000  1.0000  0.7669  0.7669\n1  Queue1   class1  1.4521  0.7669  1.8936  0.9468  0.7669  0.7669\n2  Queue2   class1  3.8343  0.7669  5.0000  2.5000  0.7669  0.7669\n3    Join   class1  3.1799  0.0000  2.0734  2.0734  1.5337  0.7669\n",
            "numerical_values": [
              0.0,
              1.0,
              0.8791,
              0.8791,
              0.995,
              0.995,
              0.8801,
              0.8764,
              1.0,
              1.0,
              1.0,
              2.6764,
              0.8854,
              3.0212,
              1.5106,
              0.8764,
              0.8715,
              2.0,
              2.0,
              1.0,
              2.6266,
              0.886,
              3.0353,
              1.5177,
              0.8764,
              0.8728,
              3.0,
              1.0,
              2.9037,
              0.0,
              1.6797,
              1.6797,
              1.7657,
              0.8801,
              2.0,
              0.0,
              1.0,
              0.7669,
              0.7669,
              1.0,
              1.0,
              0.7669,
              0.7669,
              1.0,
              1.0,
              1.0,
              1.4521,
              0.7669,
              1.8936,
              0.9468,
              0.7669,
              0.7669,
              2.0,
              2.0,
              1.0,
              3.8343,
              0.7669,
              5.0,
              2.5,
              0.7669,
              0.7669,
              3.0,
              1.0,
              3.1799,
              0.0,
              2.0734,
              2.0734,
              1.5337,
              0.7669
            ]
          }
        }
      ],
      "execution_count": 6
    }
  },
  "numerical_summary": {
    "cell_1": [
      5.0,
      1.0
    ],
    "cell_2": [
      1.0,
      1.0,
      2.0,
      2.0,
      1.0,
      1.0,
      5.0,
      0.0
    ],
    "cell_3": [
      1.0,
      1.0,
      1.0,
      1.0,
      1.0,
      2.0,
      1.0,
      1.0
    ],
    "cell_5": [
      1.0,
      1.7155757437518088e+18,
      0.0,
      1.0,
      0.8791,
      0.8791,
      0.995,
      0.995,
      0.8801,
      0.8764,
      1.0,
      1.0,
      1.0,
      2.6764,
      0.8854,
      3.0212,
      1.5106,
      0.8764,
      0.8715,
      2.0,
      2.0,
      1.0,
      2.6266,
      0.886,
      3.0353,
      1.5177,
      0.8764,
      0.8728,
      3.0,
      1.0,
      2.9037,
      0.0,
      1.6797,
      1.6797,
      1.7657,
      0.8801,
      2.0,
      0.0,
      1.0,
      0.7669,
      0.7669,
      1.0,
      1.0,
      0.7669,
      0.7669,
      1.0,
      1.0,
      1.0,
      1.4521,
      0.7669,
      1.8936,
      0.9468,
      0.7669,
      0.7669,
      2.0,
      2.0,
      1.0,
      3.8343,
      0.7669,
      5.0,
      2.5,
      0.7669,
      0.7669,
      3.0,
      1.0,
      3.1799,
      0.0,
      2.0734,
      2.0734,
      1.5337,
      0.7669,
      23000.0,
      1.0
    ]
  },
  "metadata": {
    "notebook_path": "forkJoin/fj_basic_closed.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 6,
    "code_cells": 6,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}