{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:02.077282Z",
          "start_time": "2025-07-30T22:18:01.121669Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:45.698974Z",
          "iopub.execute_input": "2026-01-02T14:09:45.699122Z",
          "shell.execute_reply": "2026-01-02T14:09:46.556944Z",
          "iopub.status.idle": "2026-01-02T14:09:46.557247Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "# Fork-Join network example 6\nmodel = Network('model')",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:02.084621Z",
          "start_time": "2025-07-30T22:18:02.080224Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:46.558278Z",
          "iopub.execute_input": "2026-01-02T14:09:46.558417Z",
          "shell.execute_reply": "2026-01-02T14:09:46.562105Z",
          "iopub.status.idle": "2026-01-02T14:09:46.562433Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Create network\nsource = Source(model,'Source')\nqueue1 = Queue(model,'Queue1',SchedStrategy.FCFS)\nqueue2 = Queue(model,'Queue2',SchedStrategy.FCFS)\nfork1 = Fork(model,'Fork1')\njoin1 = Join(model,'Join1',fork1)\nqueue3 = Queue(model,'Queue3',SchedStrategy.FCFS)\nqueue4 = Queue(model,'Queue4',SchedStrategy.FCFS)\nfork2 = Fork(model,'Fork2')\njoin2 = Join(model,'Join2',fork2)\nsink = Sink(model,'Sink')\n\njobclass1 = OpenClass(model, 'class1')",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:02.149228Z",
          "start_time": "2025-07-30T22:18:02.138096Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:46.563217Z",
          "iopub.execute_input": "2026-01-02T14:09:46.563314Z",
          "shell.execute_reply": "2026-01-02T14:09:46.570454Z",
          "iopub.status.idle": "2026-01-02T14:09:46.570822Z"
        }
      },
      "outputs": [],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# Service configurations\nsource.set_arrival(jobclass1, Exp(0.4))\nqueue1.set_service(jobclass1, Exp(1.0))\nqueue2.set_service(jobclass1, Exp(1.0))\nqueue3.set_service(jobclass1, Exp(1.0))\nqueue4.set_service(jobclass1, Exp(1.0))",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:02.198517Z",
          "start_time": "2025-07-30T22:18:02.189507Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:46.571781Z",
          "iopub.execute_input": "2026-01-02T14:09:46.571878Z",
          "shell.execute_reply": "2026-01-02T14:09:46.576318Z",
          "iopub.status.idle": "2026-01-02T14:09:46.576617Z"
        }
      },
      "outputs": [],
      "execution_count": 4
    },
    "cell_4": {
      "cell_type": "code",
      "source": "# Two sequential fork-join stages routing\nP = model.init_routing_matrix()\nP.set(jobclass1, jobclass1, source, fork1, 1.0)\nP.set(jobclass1, jobclass1, fork1, queue1, 1.0)\nP.set(jobclass1, jobclass1, fork1, queue2, 1.0)\nP.set(jobclass1, jobclass1, queue1, join1, 1.0)\nP.set(jobclass1, jobclass1, queue2, join1, 1.0)\nP.set(jobclass1, jobclass1, join1, fork2, 1.0)\nP.set(jobclass1, jobclass1, fork2, queue3, 1.0)\nP.set(jobclass1, jobclass1, fork2, queue4, 1.0)\nP.set(jobclass1, jobclass1, queue3, join2, 1.0)\nP.set(jobclass1, jobclass1, queue4, join2, 1.0)\nP.set(jobclass1, jobclass1, join2, sink, 1.0)\nmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:02.248748Z",
          "start_time": "2025-07-30T22:18:02.240521Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:46.577613Z",
          "iopub.execute_input": "2026-01-02T14:09:46.577717Z",
          "shell.execute_reply": "2026-01-02T14:09:46.583666Z",
          "iopub.status.idle": "2026-01-02T14:09:46.583974Z"
        }
      },
      "outputs": [],
      "execution_count": 5
    },
    "cell_5": {
      "cell_type": "code",
      "source": "# Solve with multiple methods\nsolvers = [JMT(model, seed=23000), MVA(model)]\nfor i, solver in enumerate(solvers):\n    print(f'SOLVER {i+1}: {solver.get_name()}')\n    avgTable = solver.avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:03.610841Z",
          "start_time": "2025-07-30T22:18:02.289502Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:46.584887Z",
          "iopub.execute_input": "2026-01-02T14:09:46.585017Z",
          "iopub.status.idle": "2026-01-02T14:09:47.859955Z",
          "shell.execute_reply": "2026-01-02T14:09:47.859664Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "SOLVER 1: SolverJMT\nJMT Model: /tmp/workspace/jsim/16631272698313556188/jmodel.jsim\n",
            "numerical_values": [
              1.0,
              1.6631272698313556e+19
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Station JobClass    QLen    Util   RespT  ResidT    ArvR    Tput\n0  Source   class1  0.0000  0.0000  0.0000  0.0000  0.0000  0.3975\n1  Queue1   class1  0.6574  0.3987  1.6509  0.8254  0.3975  0.4032\n2  Queue2   class1  0.6394  0.3974  1.6874  0.8437  0.3975  0.4024\n3   Join1   class1  0.5835  0.0000  0.7363  0.7363  0.7996  0.4038\n4  Queue3   class1  0.6722  0.3992  1.6622  0.8311  0.4038  0.4040\n5  Queue4   class1  0.6451  0.3963  1.5845  0.7923  0.4038  0.4038\n6   Join2   class1  0.6520  0.0000  0.7552  0.7552  0.8001  0.4040\nSOLVER 2: SolverMVA\n",
            "numerical_values": [
              0.0,
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.3975,
              1.0,
              1.0,
              1.0,
              0.6574,
              0.3987,
              1.6509,
              0.8254,
              0.3975,
              0.4032,
              2.0,
              2.0,
              1.0,
              0.6394,
              0.3974,
              1.6874,
              0.8437,
              0.3975,
              0.4024,
              3.0,
              1.0,
              1.0,
              0.5835,
              0.0,
              0.7363,
              0.7363,
              0.7996,
              0.4038,
              4.0,
              3.0,
              1.0,
              0.6722,
              0.3992,
              1.6622,
              0.8311,
              0.4038,
              0.404,
              5.0,
              4.0,
              1.0,
              0.6451,
              0.3963,
              1.5845,
              0.7923,
              0.4038,
              0.4038,
              6.0,
              2.0,
              1.0,
              0.652,
              0.0,
              0.7552,
              0.7552,
              0.8001,
              0.404,
              2.0
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Station JobClass    QLen  Util   RespT  ResidT  ArvR  Tput\n0  Source   class1  0.0000   0.0  0.0000  0.0000   0.0   0.4\n1  Queue1   class1  0.6665   0.4  1.6665  0.8333   0.2   0.4\n2  Queue2   class1  0.6665   0.4  1.6665  0.8333   0.2   0.4\n3   Join1   class1  0.6665   0.0  0.8332  0.8332   0.4   0.4\n4  Queue3   class1  0.6665   0.4  1.6665  0.8333   0.4   0.4\n5  Queue4   class1  0.6665   0.4  1.6665  0.8333   0.4   0.4\n6   Join2   class1  0.6665   0.0  0.8332  0.8332   0.8   0.4\n",
            "numerical_values": [
              0.0,
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.4,
              1.0,
              1.0,
              1.0,
              0.6665,
              0.4,
              1.6665,
              0.8333,
              0.2,
              0.4,
              2.0,
              2.0,
              1.0,
              0.6665,
              0.4,
              1.6665,
              0.8333,
              0.2,
              0.4,
              3.0,
              1.0,
              1.0,
              0.6665,
              0.0,
              0.8332,
              0.8332,
              0.4,
              0.4,
              4.0,
              3.0,
              1.0,
              0.6665,
              0.4,
              1.6665,
              0.8333,
              0.4,
              0.4,
              5.0,
              4.0,
              1.0,
              0.6665,
              0.4,
              1.6665,
              0.8333,
              0.4,
              0.4,
              6.0,
              2.0,
              1.0,
              0.6665,
              0.0,
              0.8332,
              0.8332,
              0.8,
              0.4
            ]
          }
        }
      ],
      "execution_count": 6
    }
  },
  "numerical_summary": {
    "cell_1": [
      6.0
    ],
    "cell_5": [
      1.0,
      1.6631272698313556e+19,
      0.0,
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.3975,
      1.0,
      1.0,
      1.0,
      0.6574,
      0.3987,
      1.6509,
      0.8254,
      0.3975,
      0.4032,
      2.0,
      2.0,
      1.0,
      0.6394,
      0.3974,
      1.6874,
      0.8437,
      0.3975,
      0.4024,
      3.0,
      1.0,
      1.0,
      0.5835,
      0.0,
      0.7363,
      0.7363,
      0.7996,
      0.4038,
      4.0,
      3.0,
      1.0,
      0.6722,
      0.3992,
      1.6622,
      0.8311,
      0.4038,
      0.404,
      5.0,
      4.0,
      1.0,
      0.6451,
      0.3963,
      1.5845,
      0.7923,
      0.4038,
      0.4038,
      6.0,
      2.0,
      1.0,
      0.652,
      0.0,
      0.7552,
      0.7552,
      0.8001,
      0.404,
      2.0,
      0.0,
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.4,
      1.0,
      1.0,
      1.0,
      0.6665,
      0.4,
      1.6665,
      0.8333,
      0.2,
      0.4,
      2.0,
      2.0,
      1.0,
      0.6665,
      0.4,
      1.6665,
      0.8333,
      0.2,
      0.4,
      3.0,
      1.0,
      1.0,
      0.6665,
      0.0,
      0.8332,
      0.8332,
      0.4,
      0.4,
      4.0,
      3.0,
      1.0,
      0.6665,
      0.4,
      1.6665,
      0.8333,
      0.4,
      0.4,
      5.0,
      4.0,
      1.0,
      0.6665,
      0.4,
      1.6665,
      0.8333,
      0.4,
      0.4,
      6.0,
      2.0,
      1.0,
      0.6665,
      0.0,
      0.8332,
      0.8332,
      0.8,
      0.4,
      23000.0,
      1.0
    ]
  },
  "metadata": {
    "notebook_path": "forkJoin/fj_serialfjs_open.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 6,
    "code_cells": 6,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}