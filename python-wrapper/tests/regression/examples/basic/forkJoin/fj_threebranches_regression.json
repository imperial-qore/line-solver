{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:10.185518Z",
          "start_time": "2025-07-30T22:18:09.302259Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:48.850797Z",
          "iopub.execute_input": "2026-01-02T14:09:48.850902Z",
          "iopub.status.idle": "2026-01-02T14:09:49.588368Z",
          "shell.execute_reply": "2026-01-02T14:09:49.587964Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "#Advanced Fork-Join Example 13\n#Complex fork-join with 3 parallel branches\nmodel = Network('model')",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:10.243807Z",
          "start_time": "2025-07-30T22:18:10.239623Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:49.589717Z",
          "iopub.execute_input": "2026-01-02T14:09:49.589923Z",
          "shell.execute_reply": "2026-01-02T14:09:49.595769Z",
          "iopub.status.idle": "2026-01-02T14:09:49.596100Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Create network\ndelay = Delay(model, 'Delay1')\nqueue1 = Queue(model,'Queue1',SchedStrategy.PS)\nqueue2 = Queue(model,'Queue2',SchedStrategy.PS)\nqueue3 = Queue(model,'Queue3',SchedStrategy.PS)\nfork = Fork(model,'Fork')\njoin = Join(model,'Join', fork)\n\njobclass1 = ClosedClass(model, 'class1', 10, delay, 0)\njobclass2 = ClosedClass(model, 'class2', 10, delay, 0)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:10.305113Z",
          "start_time": "2025-07-30T22:18:10.288248Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:49.597161Z",
          "iopub.execute_input": "2026-01-02T14:09:49.597263Z",
          "shell.execute_reply": "2026-01-02T14:09:49.605384Z",
          "iopub.status.idle": "2026-01-02T14:09:49.605691Z"
        }
      },
      "outputs": [],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# Service configurations\n# Class 1\nqueue1.set_service(jobclass1, Exp(1.5))\nqueue2.set_service(jobclass1, Exp(1.1))\nqueue3.set_service(jobclass1, Exp(2.5))\ndelay.set_service(jobclass1, Exp(0.5))\n\n# Class 2\nqueue1.set_service(jobclass2, Exp(2.8))\nqueue2.set_service(jobclass2, Exp(3.0))\nqueue3.set_service(jobclass2, Exp(1.0))\ndelay.set_service(jobclass2, Exp(0.8))",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:10.354775Z",
          "start_time": "2025-07-30T22:18:10.349553Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:49.606931Z",
          "iopub.execute_input": "2026-01-02T14:09:49.607061Z",
          "iopub.status.idle": "2026-01-02T14:09:49.613172Z",
          "shell.execute_reply": "2026-01-02T14:09:49.612683Z"
        }
      },
      "outputs": [],
      "execution_count": 4
    },
    "cell_4": {
      "cell_type": "code",
      "source": "# Set routing matrix with serial routing queue2->queue3\nP = model.init_routing_matrix()\n\n# Class 1 routing\nP.set(jobclass1, jobclass1, delay, fork, 1.0)\nP.set(jobclass1, jobclass1, fork, queue1, 1.0)\nP.set(jobclass1, jobclass1, fork, queue2, 1.0)\nP.set(jobclass1, jobclass1, queue2, queue3, 1.0)  # Serial: queue2 -> queue3\nP.set(jobclass1, jobclass1, queue3, join, 1.0)\nP.set(jobclass1, jobclass1, queue1, join, 1.0)\nP.set(jobclass1, jobclass1, join, delay, 1.0)\n\n# Class 2 routing\nP.set(jobclass2, jobclass2, delay, fork, 1.0)\nP.set(jobclass2, jobclass2, fork, queue1, 1.0)\nP.set(jobclass2, jobclass2, fork, queue2, 1.0)\nP.set(jobclass2, jobclass2, queue2, queue3, 1.0)  # Serial: queue2 -> queue3\nP.set(jobclass2, jobclass2, queue3, join, 1.0)\nP.set(jobclass2, jobclass2, queue1, join, 1.0)\nP.set(jobclass2, jobclass2, join, delay, 1.0)\n\nmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:10.419861Z",
          "start_time": "2025-07-30T22:18:10.410311Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:49.614358Z",
          "iopub.execute_input": "2026-01-02T14:09:49.614477Z",
          "shell.execute_reply": "2026-01-02T14:09:49.621879Z",
          "iopub.status.idle": "2026-01-02T14:09:49.622246Z"
        }
      },
      "outputs": [],
      "execution_count": 5
    },
    "cell_5": {
      "cell_type": "code",
      "source": "# Solve with MVA only (like MATLAB)\nsolver = MVA(model)\navgTable = solver.avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:18:10.789688Z",
          "start_time": "2025-07-30T22:18:10.458918Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:49.623560Z",
          "iopub.execute_input": "2026-01-02T14:09:49.623784Z",
          "iopub.status.idle": "2026-01-02T14:09:49.997028Z",
          "shell.execute_reply": "2026-01-02T14:09:49.996765Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Station JobClass    QLen    Util    RespT  ResidT    ArvR    Tput\n0  Delay1   class1  1.4649  1.4649   2.0000  2.0000  0.7325  0.7325\n1  Delay1   class2  0.7901  0.7901   1.2500  1.2500  0.6321  0.6321\n2  Queue1   class1  1.6386  0.4883   2.2371  1.1185  0.7325  0.7325\n3  Queue1   class2  0.7575  0.2257   1.1984  0.5992  0.6321  0.6321\n4  Queue2   class1  4.7629  0.6659   6.5026  3.2513  0.7325  0.7325\n5  Queue2   class2  1.5071  0.2107   2.3843  1.1922  0.6321  0.6321\n6  Queue3   class1  3.5643  0.2930   4.8662  2.4331  0.7325  0.7325\n7  Queue3   class2  7.6896  0.6321  12.1655  6.0827  0.6321  0.6321\n8    Join   class1  7.2282  0.0000   4.9342  4.9342  1.4649  0.7325\n9    Join   class2  8.5556  0.0000   6.7677  6.7677  1.2642  0.6321\n",
            "numerical_values": [
              0.0,
              1.0,
              1.0,
              1.4649,
              1.4649,
              2.0,
              2.0,
              0.7325,
              0.7325,
              1.0,
              1.0,
              2.0,
              0.7901,
              0.7901,
              1.25,
              1.25,
              0.6321,
              0.6321,
              2.0,
              1.0,
              1.0,
              1.6386,
              0.4883,
              2.2371,
              1.1185,
              0.7325,
              0.7325,
              3.0,
              1.0,
              2.0,
              0.7575,
              0.2257,
              1.1984,
              0.5992,
              0.6321,
              0.6321,
              4.0,
              2.0,
              1.0,
              4.7629,
              0.6659,
              6.5026,
              3.2513,
              0.7325,
              0.7325,
              5.0,
              2.0,
              2.0,
              1.5071,
              0.2107,
              2.3843,
              1.1922,
              0.6321,
              0.6321,
              6.0,
              3.0,
              1.0,
              3.5643,
              0.293,
              4.8662,
              2.4331,
              0.7325,
              0.7325,
              7.0,
              3.0,
              2.0,
              7.6896,
              0.6321,
              12.1655,
              6.0827,
              0.6321,
              0.6321,
              8.0,
              1.0,
              7.2282,
              0.0,
              4.9342,
              4.9342,
              1.4649,
              0.7325,
              9.0,
              2.0,
              8.5556,
              0.0,
              6.7677,
              6.7677,
              1.2642,
              0.6321
            ]
          }
        }
      ],
      "execution_count": 6
    }
  },
  "numerical_summary": {
    "cell_1": [
      13.0,
      3.0
    ],
    "cell_5": [
      0.0,
      1.0,
      1.0,
      1.4649,
      1.4649,
      2.0,
      2.0,
      0.7325,
      0.7325,
      1.0,
      1.0,
      2.0,
      0.7901,
      0.7901,
      1.25,
      1.25,
      0.6321,
      0.6321,
      2.0,
      1.0,
      1.0,
      1.6386,
      0.4883,
      2.2371,
      1.1185,
      0.7325,
      0.7325,
      3.0,
      1.0,
      2.0,
      0.7575,
      0.2257,
      1.1984,
      0.5992,
      0.6321,
      0.6321,
      4.0,
      2.0,
      1.0,
      4.7629,
      0.6659,
      6.5026,
      3.2513,
      0.7325,
      0.7325,
      5.0,
      2.0,
      2.0,
      1.5071,
      0.2107,
      2.3843,
      1.1922,
      0.6321,
      0.6321,
      6.0,
      3.0,
      1.0,
      3.5643,
      0.293,
      4.8662,
      2.4331,
      0.7325,
      0.7325,
      7.0,
      3.0,
      2.0,
      7.6896,
      0.6321,
      12.1655,
      6.0827,
      0.6321,
      0.6321,
      8.0,
      1.0,
      7.2282,
      0.0,
      4.9342,
      4.9342,
      1.4649,
      0.7325,
      9.0,
      2.0,
      8.5556,
      0.0,
      6.7677,
      6.7677,
      1.2642,
      0.6321
    ]
  },
  "metadata": {
    "notebook_path": "forkJoin/fj_threebranches.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 6,
    "code_cells": 6,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}