{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:45.543530Z",
          "start_time": "2025-07-30T22:17:44.646483Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:39.430975Z",
          "iopub.execute_input": "2026-01-02T14:09:39.431067Z",
          "iopub.status.idle": "2026-01-02T14:09:40.246725Z",
          "shell.execute_reply": "2026-01-02T14:09:40.246400Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "# Fork-Join network example 9\nmodel = Network('model')",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:45.620175Z",
          "start_time": "2025-07-30T22:17:45.616271Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:40.247939Z",
          "iopub.execute_input": "2026-01-02T14:09:40.248089Z",
          "iopub.status.idle": "2026-01-02T14:09:40.254466Z",
          "shell.execute_reply": "2026-01-02T14:09:40.254159Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Create network\ndelay = Delay(model, 'Delay1')\nqueue1 = Queue(model,'Queue1',SchedStrategy.FCFS)\nqueue2 = Queue(model,'Queue2',SchedStrategy.FCFS)\nfork = Fork(model,'Fork')\njoin = Join(model,'Join', fork)\n\njobclass1 = ClosedClass(model, 'class1', 10, delay, 0)\njobclass2 = ClosedClass(model, 'class2', 10, delay, 0)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:45.690566Z",
          "start_time": "2025-07-30T22:17:45.668587Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:40.255327Z",
          "iopub.execute_input": "2026-01-02T14:09:40.255426Z",
          "iopub.status.idle": "2026-01-02T14:09:40.263575Z",
          "shell.execute_reply": "2026-01-02T14:09:40.263316Z"
        }
      },
      "outputs": [],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# Service configurations\n# Class 1\nqueue1.set_service(jobclass1, Exp(1.0))\nqueue2.set_service(jobclass1, Exp(2.0))\ndelay.set_service(jobclass1, Exp(0.5))\n\n# Class 2\nqueue1.set_service(jobclass2, Exp(1.0))\nqueue2.set_service(jobclass2, Exp(2.0))\ndelay.set_service(jobclass2, Exp(0.2))",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:45.723903Z",
          "start_time": "2025-07-30T22:17:45.719345Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:40.264734Z",
          "iopub.execute_input": "2026-01-02T14:09:40.264848Z",
          "shell.execute_reply": "2026-01-02T14:09:40.269751Z",
          "iopub.status.idle": "2026-01-02T14:09:40.270033Z"
        }
      },
      "outputs": [],
      "execution_count": 4
    },
    "cell_4": {
      "cell_type": "code",
      "source": "# Set routing matrix\nP = model.init_routing_matrix()\n\n# Class 1 routing\nP.set(jobclass1, jobclass1, delay, fork, 1.0)\nP.set(jobclass1, jobclass1, fork, queue1, 1.0)\nP.set(jobclass1, jobclass1, fork, queue2, 1.0)\nP.set(jobclass1, jobclass1, queue1, join, 1.0)\nP.set(jobclass1, jobclass1, queue2, join, 1.0)\nP.set(jobclass1, jobclass1, join, delay, 1.0)\n\n# Class 2 routing\nP.set(jobclass2, jobclass2, delay, fork, 1.0)\nP.set(jobclass2, jobclass2, fork, queue1, 1.0)\nP.set(jobclass2, jobclass2, fork, queue2, 1.0)\nP.set(jobclass2, jobclass2, queue1, join, 1.0)\nP.set(jobclass2, jobclass2, queue2, join, 1.0)\nP.set(jobclass2, jobclass2, join, delay, 1.0)\n\nmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:45.777082Z",
          "start_time": "2025-07-30T22:17:45.769586Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:40.271080Z",
          "iopub.execute_input": "2026-01-02T14:09:40.271187Z",
          "iopub.status.idle": "2026-01-02T14:09:40.278348Z",
          "shell.execute_reply": "2026-01-02T14:09:40.278073Z"
        }
      },
      "outputs": [],
      "execution_count": 5
    },
    "cell_5": {
      "cell_type": "code",
      "source": "# Solve with multiple methods\nsolvers = [JMT(model, seed=23000), MVA(model)]\nfor i, solver in enumerate(solvers):\n    print(f'SOLVER {i+1}: {solver.get_name()}')\n    avgTable = solver.avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:47.250615Z",
          "start_time": "2025-07-30T22:17:45.819111Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:40.279370Z",
          "iopub.execute_input": "2026-01-02T14:09:40.279506Z",
          "shell.execute_reply": "2026-01-02T14:09:41.613311Z",
          "iopub.status.idle": "2026-01-02T14:09:41.613582Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "SOLVER 1: SolverJMT\nJMT Model: /tmp/workspace/jsim/3008607646341602567/jmodel.jsim\n",
            "numerical_values": [
              1.0,
              3.008607646341603e+18
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Station JobClass    QLen    Util    RespT  ResidT    ArvR    Tput\n0  Delay1   class1  1.0786  1.0786   1.9821  1.9821  0.5433  0.5434\n1  Delay1   class2  2.2985  2.2985   5.0546  5.0546  0.4624  0.4626\n2  Queue1   class1  8.9214  0.5414  16.4290  8.2145  0.5434  0.5433\n3  Queue1   class2  7.7015  0.4553  16.6717  8.3358  0.4626  0.4624\n4  Queue2   class1  0.5708  0.2640   1.0145  0.5073  0.5434  0.5434\n5  Queue2   class2  0.4647  0.2335   1.0317  0.5158  0.4626  0.4626\n6    Join   class1  8.4049  0.0000   7.7213  7.7213  1.0828  0.5433\n7    Join   class2  7.2518  0.0000   7.7680  7.7680  0.9268  0.4624\nSOLVER 2: SolverMVA\n",
            "numerical_values": [
              0.0,
              1.0,
              1.0,
              1.0786,
              1.0786,
              1.9821,
              1.9821,
              0.5433,
              0.5434,
              1.0,
              1.0,
              2.0,
              2.2985,
              2.2985,
              5.0546,
              5.0546,
              0.4624,
              0.4626,
              2.0,
              1.0,
              1.0,
              8.9214,
              0.5414,
              16.429,
              8.2145,
              0.5434,
              0.5433,
              3.0,
              1.0,
              2.0,
              7.7015,
              0.4553,
              16.6717,
              8.3358,
              0.4626,
              0.4624,
              4.0,
              2.0,
              1.0,
              0.5708,
              0.264,
              1.0145,
              0.5073,
              0.5434,
              0.5434,
              5.0,
              2.0,
              2.0,
              0.4647,
              0.2335,
              1.0317,
              0.5158,
              0.4626,
              0.4626,
              6.0,
              1.0,
              8.4049,
              0.0,
              7.7213,
              7.7213,
              1.0828,
              0.5433,
              7.0,
              2.0,
              7.2518,
              0.0,
              7.768,
              7.768,
              0.9268,
              0.4624,
              2.0
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Station JobClass    QLen    Util    RespT  ResidT    ArvR    Tput\n0  Delay1   class1  1.0241  1.0241   2.0000  2.0000  0.5120  0.5120\n1  Delay1   class2  2.2149  2.2149   5.0000  5.0000  0.4430  0.4430\n2  Queue1   class1  9.0081  0.5121  17.5920  8.7960  0.5120  0.5121\n3  Queue1   class2  7.8062  0.4430  17.6214  8.8107  0.4430  0.4430\n4  Queue2   class1  0.4843  0.2560   0.9458  0.4729  0.5120  0.5121\n5  Queue2   class2  0.4194  0.2215   0.9466  0.4733  0.4430  0.4430\n6    Join   class1  8.5768  0.0000   8.3748  8.3748  1.0241  0.5120\n7    Join   class2  7.4327  0.0000   8.3891  8.3891  0.8860  0.4430\n",
            "numerical_values": [
              0.0,
              1.0,
              1.0,
              1.0241,
              1.0241,
              2.0,
              2.0,
              0.512,
              0.512,
              1.0,
              1.0,
              2.0,
              2.2149,
              2.2149,
              5.0,
              5.0,
              0.443,
              0.443,
              2.0,
              1.0,
              1.0,
              9.0081,
              0.5121,
              17.592,
              8.796,
              0.512,
              0.5121,
              3.0,
              1.0,
              2.0,
              7.8062,
              0.443,
              17.6214,
              8.8107,
              0.443,
              0.443,
              4.0,
              2.0,
              1.0,
              0.4843,
              0.256,
              0.9458,
              0.4729,
              0.512,
              0.5121,
              5.0,
              2.0,
              2.0,
              0.4194,
              0.2215,
              0.9466,
              0.4733,
              0.443,
              0.443,
              6.0,
              1.0,
              8.5768,
              0.0,
              8.3748,
              8.3748,
              1.0241,
              0.512,
              7.0,
              2.0,
              7.4327,
              0.0,
              8.3891,
              8.3891,
              0.886,
              0.443
            ]
          }
        }
      ],
      "execution_count": 6
    }
  },
  "numerical_summary": {
    "cell_1": [
      9.0
    ],
    "cell_5": [
      1.0,
      3.008607646341603e+18,
      0.0,
      1.0,
      1.0,
      1.0786,
      1.0786,
      1.9821,
      1.9821,
      0.5433,
      0.5434,
      1.0,
      1.0,
      2.0,
      2.2985,
      2.2985,
      5.0546,
      5.0546,
      0.4624,
      0.4626,
      2.0,
      1.0,
      1.0,
      8.9214,
      0.5414,
      16.429,
      8.2145,
      0.5434,
      0.5433,
      3.0,
      1.0,
      2.0,
      7.7015,
      0.4553,
      16.6717,
      8.3358,
      0.4626,
      0.4624,
      4.0,
      2.0,
      1.0,
      0.5708,
      0.264,
      1.0145,
      0.5073,
      0.5434,
      0.5434,
      5.0,
      2.0,
      2.0,
      0.4647,
      0.2335,
      1.0317,
      0.5158,
      0.4626,
      0.4626,
      6.0,
      1.0,
      8.4049,
      0.0,
      7.7213,
      7.7213,
      1.0828,
      0.5433,
      7.0,
      2.0,
      7.2518,
      0.0,
      7.768,
      7.768,
      0.9268,
      0.4624,
      2.0,
      0.0,
      1.0,
      1.0,
      1.0241,
      1.0241,
      2.0,
      2.0,
      0.512,
      0.512,
      1.0,
      1.0,
      2.0,
      2.2149,
      2.2149,
      5.0,
      5.0,
      0.443,
      0.443,
      2.0,
      1.0,
      1.0,
      9.0081,
      0.5121,
      17.592,
      8.796,
      0.512,
      0.5121,
      3.0,
      1.0,
      2.0,
      7.8062,
      0.443,
      17.6214,
      8.8107,
      0.443,
      0.443,
      4.0,
      2.0,
      1.0,
      0.4843,
      0.256,
      0.9458,
      0.4729,
      0.512,
      0.5121,
      5.0,
      2.0,
      2.0,
      0.4194,
      0.2215,
      0.9466,
      0.4733,
      0.443,
      0.443,
      6.0,
      1.0,
      8.5768,
      0.0,
      8.3748,
      8.3748,
      1.0241,
      0.512,
      7.0,
      2.0,
      7.4327,
      0.0,
      8.3891,
      8.3891,
      0.886,
      0.443,
      23000.0,
      1.0
    ]
  },
  "metadata": {
    "notebook_path": "forkJoin/fj_route_overlap.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 6,
    "code_cells": 6,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}