{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:54.064128Z",
          "start_time": "2025-07-30T22:17:53.115284Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:42.607480Z",
          "iopub.execute_input": "2026-01-02T14:09:42.607593Z",
          "shell.execute_reply": "2026-01-02T14:09:43.517177Z",
          "iopub.status.idle": "2026-01-02T14:09:43.517616Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "# Series of Fork-Join Networks\nmodel = Network('model')",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:54.125324Z",
          "start_time": "2025-07-30T22:17:54.121669Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:43.518762Z",
          "iopub.execute_input": "2026-01-02T14:09:43.518932Z",
          "shell.execute_reply": "2026-01-02T14:09:43.524928Z",
          "iopub.status.idle": "2026-01-02T14:09:43.525356Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Create series of fork-join stages\ndelay = Delay(model, 'Delay1')\nqueue1 = Queue(model,'Queue1',SchedStrategy.PS)\nqueue2 = Queue(model,'Queue2',SchedStrategy.PS)\nfork = Fork(model,'Fork')\njoin = Join(model,'Join', fork)\nqueue3 = Queue(model,'Queue3',SchedStrategy.PS)\nqueue4 = Queue(model,'Queue4',SchedStrategy.PS)\nfork2 = Fork(model,'Fork2')\njoin2 = Join(model,'Join2', fork2)\n\njobclass1 = ClosedClass(model, 'class1', 10, delay, 0)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:54.182346Z",
          "start_time": "2025-07-30T22:17:54.169130Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:43.526574Z",
          "iopub.execute_input": "2026-01-02T14:09:43.526732Z",
          "iopub.status.idle": "2026-01-02T14:09:43.535814Z",
          "shell.execute_reply": "2026-01-02T14:09:43.535431Z"
        }
      },
      "outputs": [],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# Service configurations\nqueue1.set_service(jobclass1, Exp(1.0))\nqueue2.set_service(jobclass1, Exp(1.0))\ndelay.set_service(jobclass1, Exp(0.5))\nqueue3.set_service(jobclass1, Exp(1.0))\nqueue4.set_service(jobclass1, Exp(1.0))",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:54.224518Z",
          "start_time": "2025-07-30T22:17:54.220165Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:43.536960Z",
          "iopub.execute_input": "2026-01-02T14:09:43.537089Z",
          "shell.execute_reply": "2026-01-02T14:09:43.542777Z",
          "iopub.status.idle": "2026-01-02T14:09:43.543165Z"
        }
      },
      "outputs": [],
      "execution_count": 4
    },
    "cell_4": {
      "cell_type": "code",
      "source": "# Series fork-join routing\nP = model.init_routing_matrix()\n\n# First fork-join stage\nP.set(jobclass1, jobclass1, delay, fork, 1.0)\nP.set(jobclass1, jobclass1, fork, queue1, 1.0)\nP.set(jobclass1, jobclass1, fork, queue2, 1.0)\nP.set(jobclass1, jobclass1, queue1, join, 1.0)\nP.set(jobclass1, jobclass1, queue2, join, 1.0)\n# Between stages: join -> fork2\nP.set(jobclass1, jobclass1, join, fork2, 1.0)\n# Second fork-join stage\nP.set(jobclass1, jobclass1, fork2, queue3, 1.0)\nP.set(jobclass1, jobclass1, fork2, queue4, 1.0)\nP.set(jobclass1, jobclass1, queue3, join2, 1.0)\nP.set(jobclass1, jobclass1, queue4, join2, 1.0)\nP.set(jobclass1, jobclass1, join2, delay, 1.0)\n\nmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:54.288924Z",
          "start_time": "2025-07-30T22:17:54.281206Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:43.544406Z",
          "iopub.execute_input": "2026-01-02T14:09:43.544546Z",
          "shell.execute_reply": "2026-01-02T14:09:43.552339Z",
          "iopub.status.idle": "2026-01-02T14:09:43.552693Z"
        }
      },
      "outputs": [],
      "execution_count": 5
    },
    "cell_5": {
      "cell_type": "code",
      "source": "# Solve with multiple methods\nsolvers = [JMT(model, seed=23000), MVA(model)]\nfor i, solver in enumerate(solvers):\n    print(f'SOLVER {i+1}: {solver.get_name()}')\n    avgTable = solver.avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:55.836189Z",
          "start_time": "2025-07-30T22:17:54.339840Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:09:43.553867Z",
          "iopub.execute_input": "2026-01-02T14:09:43.554041Z",
          "shell.execute_reply": "2026-01-02T14:09:44.859179Z",
          "iopub.status.idle": "2026-01-02T14:09:44.859561Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "SOLVER 1: SolverJMT\nJMT Model: /tmp/workspace/jsim/13044519017387820720/jmodel.jsim\n",
            "numerical_values": [
              1.0,
              1.3044519017387821e+19
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Station JobClass    QLen    Util   RespT  ResidT    ArvR    Tput\n0  Delay1   class1  1.6255  1.6255  1.9812  1.9812  0.7941  0.7942\n1  Queue1   class1  2.4695  0.7886  3.0255  1.5128  0.7942  0.7895\n2  Queue2   class1  2.6214  0.7811  3.4269  1.7134  0.7942  0.7945\n3    Join   class1  2.8113  0.0000  1.6344  1.6344  1.5847  0.7945\n4  Queue3   class1  2.7476  0.8061  3.5097  1.7549  0.7945  0.7908\n5  Queue4   class1  2.8230  0.8190  3.5903  1.7952  0.7945  0.7912\n6   Join2   class1  3.1266  0.0000  1.9626  1.9626  1.5855  0.7941\nSOLVER 2: SolverMVA\n  Station JobClass    QLen    Util   RespT  ResidT    ArvR   Tput\n0  Delay1   class1  1.5101  1.5101  2.0000  2.0000  0.7550  0.755\n1  Queue1   class1  2.8654  0.7550  3.7951  1.8975  0.3775  0.755\n2  Queue2   class1  2.8654  0.7550  3.7951  1.8975  0.3775  0.755\n3    Join   class1  2.8654  0.0000  1.8975  1.8975  0.7550  0.755\n4  Queue3   class1  2.8654  0.7550  3.7951  1.8975  0.7550  0.755\n5  Queue4   class1  2.8654  0.7550  3.7951  1.8975  0.7550  0.755\n6   Join2   class1  2.8654  0.0000  1.8975  1.8975  1.5101  0.755\n",
            "numerical_values": [
              0.0,
              1.0,
              1.0,
              1.6255,
              1.6255,
              1.9812,
              1.9812,
              0.7941,
              0.7942,
              1.0,
              1.0,
              1.0,
              2.4695,
              0.7886,
              3.0255,
              1.5128,
              0.7942,
              0.7895,
              2.0,
              2.0,
              1.0,
              2.6214,
              0.7811,
              3.4269,
              1.7134,
              0.7942,
              0.7945,
              3.0,
              1.0,
              2.8113,
              0.0,
              1.6344,
              1.6344,
              1.5847,
              0.7945,
              4.0,
              3.0,
              1.0,
              2.7476,
              0.8061,
              3.5097,
              1.7549,
              0.7945,
              0.7908,
              5.0,
              4.0,
              1.0,
              2.823,
              0.819,
              3.5903,
              1.7952,
              0.7945,
              0.7912,
              6.0,
              2.0,
              1.0,
              3.1266,
              0.0,
              1.9626,
              1.9626,
              1.5855,
              0.7941,
              2.0,
              0.0,
              1.0,
              1.0,
              1.5101,
              1.5101,
              2.0,
              2.0,
              0.755,
              0.755,
              1.0,
              1.0,
              1.0,
              2.8654,
              0.755,
              3.7951,
              1.8975,
              0.3775,
              0.755,
              2.0,
              2.0,
              1.0,
              2.8654,
              0.755,
              3.7951,
              1.8975,
              0.3775,
              0.755,
              3.0,
              1.0,
              2.8654,
              0.0,
              1.8975,
              1.8975,
              0.755,
              0.755,
              4.0,
              3.0,
              1.0,
              2.8654,
              0.755,
              3.7951,
              1.8975,
              0.755,
              0.755,
              5.0,
              4.0,
              1.0,
              2.8654,
              0.755,
              3.7951,
              1.8975,
              0.755,
              0.755,
              6.0,
              2.0,
              1.0,
              2.8654,
              0.0,
              1.8975,
              1.8975,
              1.5101,
              0.755
            ]
          }
        }
      ],
      "execution_count": 6
    }
  },
  "numerical_summary": {
    "cell_5": [
      1.0,
      1.3044519017387821e+19,
      0.0,
      1.0,
      1.0,
      1.6255,
      1.6255,
      1.9812,
      1.9812,
      0.7941,
      0.7942,
      1.0,
      1.0,
      1.0,
      2.4695,
      0.7886,
      3.0255,
      1.5128,
      0.7942,
      0.7895,
      2.0,
      2.0,
      1.0,
      2.6214,
      0.7811,
      3.4269,
      1.7134,
      0.7942,
      0.7945,
      3.0,
      1.0,
      2.8113,
      0.0,
      1.6344,
      1.6344,
      1.5847,
      0.7945,
      4.0,
      3.0,
      1.0,
      2.7476,
      0.8061,
      3.5097,
      1.7549,
      0.7945,
      0.7908,
      5.0,
      4.0,
      1.0,
      2.823,
      0.819,
      3.5903,
      1.7952,
      0.7945,
      0.7912,
      6.0,
      2.0,
      1.0,
      3.1266,
      0.0,
      1.9626,
      1.9626,
      1.5855,
      0.7941,
      2.0,
      0.0,
      1.0,
      1.0,
      1.5101,
      1.5101,
      2.0,
      2.0,
      0.755,
      0.755,
      1.0,
      1.0,
      1.0,
      2.8654,
      0.755,
      3.7951,
      1.8975,
      0.3775,
      0.755,
      2.0,
      2.0,
      1.0,
      2.8654,
      0.755,
      3.7951,
      1.8975,
      0.3775,
      0.755,
      3.0,
      1.0,
      2.8654,
      0.0,
      1.8975,
      1.8975,
      0.755,
      0.755,
      4.0,
      3.0,
      1.0,
      2.8654,
      0.755,
      3.7951,
      1.8975,
      0.755,
      0.755,
      5.0,
      4.0,
      1.0,
      2.8654,
      0.755,
      3.7951,
      1.8975,
      0.755,
      0.755,
      6.0,
      2.0,
      1.0,
      2.8654,
      0.0,
      1.8975,
      1.8975,
      1.5101,
      0.755,
      23000.0,
      1.0
    ]
  },
  "metadata": {
    "notebook_path": "forkJoin/fj_serialfjs_closed.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 6,
    "code_cells": 6,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}