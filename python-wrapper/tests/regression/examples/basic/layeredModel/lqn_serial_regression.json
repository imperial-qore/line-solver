{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nGlobalConstants.set_verbose(VerboseLevel.SILENT)\n\n# Clear variables (equivalent to MATLAB's clear P T E A solver AvgTable)\nP = None\nT = None \nE = None\nA = None\nsolver = None\nAvgTable = None",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:19:04.194866Z",
          "start_time": "2025-07-30T22:19:03.230474Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:10:10.245817Z",
          "iopub.execute_input": "2026-01-02T14:10:10.245920Z",
          "shell.execute_reply": "2026-01-02T14:10:11.087578Z",
          "iopub.status.idle": "2026-01-02T14:10:11.087932Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "print('This example illustrates the execution on a layered queueing network model.')\nprint('Performance indexes now refer to processors, tasks, entries, and activities.')\nprint('Indexes refer to the submodel (layer) where the processor or task acts as a server.')\nprint('NaN indexes indicate that the metric is not supported by the node type.')\n\n# cwd = os.path.dirname(os.path.abspath(__file__))\n# model = LayeredNetwork.parse_xml(os.path.join(cwd, 'example_layeredModel_1.xml'))\n\n# Create model following MATLAB exactly\nmodel = LayeredNetwork('myLayeredModel')\n\n# MATLAB: P{1} = Processor(model, 'P1', 1, SchedStrategy.PS);\n# MATLAB: P{2} = Processor(model, 'P2', 1, SchedStrategy.PS);\nP = {}\nP[1] = Processor(model, 'P1', 1, SchedStrategy.PS)\nP[2] = Processor(model, 'P2', 1, SchedStrategy.PS)\n\n# MATLAB: T{1} = Task(model, 'T1', 10, SchedStrategy.REF).on(P{1}).set_think_time(Exp.fit_mean(100));\n# MATLAB: T{2} = Task(model, 'T2', 1, SchedStrategy.FCFS).on(P{2}).set_think_time(Immediate());\nT = {}\nT[1] = Task(model, 'T1', 10, SchedStrategy.REF).on(P[1]).set_think_time(Exp.fit_mean(100))\nT[2] = Task(model, 'T2', 1, SchedStrategy.FCFS).on(P[2]).set_think_time(Immediate())\n\n# MATLAB: E{1} = Entry(model, 'E1').on(T{1});\n# MATLAB: E{2} = Entry(model, 'E2').on(T{2});\nE = {}\nE[1] = Entry(model, 'E1').on(T[1])\nE[2] = Entry(model, 'E2').on(T[2])\n\n# MATLAB: A{1} = Activity(model, 'AS1', Exp.fit_mean(1.6)).on(T{1}).boundTo(E{1});\n# MATLAB: A{2} = Activity(model, 'AS2', Immediate()).on(T{1}).synchCall(E{2},1);\n# MATLAB: A{3} = Activity(model, 'AS3', Exp.fit_mean(5)).on(T{2}).boundTo(E{2});\n# MATLAB: A{4} = Activity(model, 'AS4', Exp.fit_mean(1)).on(T{2}).repliesTo(E{2});\nA = {}\nA[1] = Activity(model, 'AS1', Exp.fit_mean(1.6)).on(T[1]).bound_to(E[1])\nA[2] = Activity(model, 'AS2', Immediate()).on(T[1]).synch_call(E[2], 1)\nA[3] = Activity(model, 'AS3', Exp.fit_mean(5)).on(T[2]).bound_to(E[2])\nA[4] = Activity(model, 'AS4', Exp.fit_mean(1)).on(T[2]).replies_to(E[2])\n\n# MATLAB: T{1}.add_precedence(ActivityPrecedence.Serial(A{1}, A{2}));\n# MATLAB: T{2}.add_precedence(ActivityPrecedence.Serial(A{3}, A{4}));\nT[1].add_precedence(ActivityPrecedence.Serial(A[1], A[2]))\nT[2].add_precedence(ActivityPrecedence.Serial(A[3], A[4]))",
      "metadata": {
        "collapsed": false,
        "ExecuteTime": {
          "end_time": "2025-07-30T22:19:04.271145Z",
          "start_time": "2025-07-30T22:19:04.258602Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:10:11.089069Z",
          "iopub.execute_input": "2026-01-02T14:10:11.089242Z",
          "iopub.status.idle": "2026-01-02T14:10:11.107625Z",
          "shell.execute_reply": "2026-01-02T14:10:11.107314Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "This example illustrates the execution on a layered queueing network model.\nPerformance indexes now refer to processors, tasks, entries, and activities.\nIndexes refer to the submodel (layer) where the processor or task acts as a server.\nNaN indexes indicate that the metric is not supported by the node type.\n"
          }
        }
      ],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# MATLAB: options = LQNS.defaultOptions;\n# MATLAB: options.keep = true; % uncomment to keep the intermediate XML files generates while translating the model to LQNS\noptions = LQNS.default_options()\noptions.keep = True  # uncomment to keep the intermediate XML files generates while translating the model to LQNS\n\n# MATLAB: solver{1} = LQNS(model);\n# MATLAB: AvgTable{1} = solver{1}.avg_table();\n# MATLAB: AvgTable{1}\nsolver = {}\nAvgTable = {}\n\nif LQNS.isAvailable():\n    solver[1] = LQNS(model)\n    AvgTable[1] = solver[1].avg_table()\n    print('AvgTable[1]:')\n    print(AvgTable[1])\nelse:\n    print('LQNS solver not available')\n\n# MATLAB: CallAvgTable = {};\n# MATLAB: [AvgTable{2}, CallAvgTable{2}] = solver{1}.get_raw_avg_tables();\n# MATLAB: AvgTable{2}\n# MATLAB: CallAvgTable{2}\nCallAvgTable = {}\nif LQNS.isAvailable():\n    try:\n        AvgTable[2], CallAvgTable[2] = solver[1].get_raw_avg_tables()\n        print('AvgTable[2]:')\n        print(AvgTable[2])\n        print('CallAvgTable[2]:')\n        print(CallAvgTable[2])\n    except:\n        print('getRawAvgTables method not yet implemented')\n\n# MATLAB: AvgTable{3} = LN(model).get_avg_table\nAvgTable[3] = LN(model).avg_table()\nprint('AvgTable[3]:')\nprint(AvgTable[3])",
      "metadata": {
        "collapsed": false,
        "ExecuteTime": {
          "end_time": "2025-07-30T22:19:04.533039Z",
          "start_time": "2025-07-30T22:19:04.318788Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-02T14:10:11.108678Z",
          "iopub.execute_input": "2026-01-02T14:10:11.108844Z",
          "iopub.status.idle": "2026-01-02T14:10:11.432969Z",
          "shell.execute_reply": "2026-01-02T14:10:11.432569Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Node   NodeType    QLen        Util    RespT  ResidT  ArvR    Tput\n0   P1  Processor     NaN  1.4206e-01      NaN     0.0   0.0     NaN\n1   P2  Processor     NaN  5.3271e-01      NaN     0.0   0.0     NaN\n2   T1    RefTask  1.1215  1.4206e-01      NaN     0.0   0.0  0.0888\n3   T2       Task  0.5327  5.3271e-01      NaN     0.0   0.0  0.0888\n4   E1      Entry  1.1215  1.4206e-01  12.6310     0.0   0.0  0.0888\n5   E2      Entry  0.5327  5.3271e-01   6.0000     0.0   0.0  0.0888\n6  AS1   Activity  0.1627  1.4206e-01   1.8327     0.0   0.0  0.0888\n7  AS2   Activity  0.9587  8.8786e-10  10.7983     0.0   0.0  0.0888\n8  AS3   Activity  0.4439  4.4393e-01   5.0000     0.0   0.0  0.0888\n9  AS4   Activity  0.0888  8.8786e-02   1.0000     0.0   0.0  0.0888\nAvgTable[1]:\n  Node   NodeType    QLen        Util    RespT  ResidT  ArvR    Tput\n0   P1  Processor     NaN  1.4206e-01      NaN     0.0   0.0     NaN\n1   P2  Processor     NaN  5.3271e-01      NaN     0.0   0.0     NaN\n2   T1    RefTask  1.1215  1.4206e-01      NaN     0.0   0.0  0.0888\n3   T2       Task  0.5327  5.3271e-01      NaN     0.0   0.0  0.0888\n4   E1      Entry  1.1215  1.4206e-01  12.6310     0.0   0.0  0.0888\n5   E2      Entry  0.5327  5.3271e-01   6.0000     0.0   0.0  0.0888\n6  AS1   Activity  0.1627  1.4206e-01   1.8327     0.0   0.0  0.0888\n7  AS2   Activity  0.9587  8.8786e-10  10.7983     0.0   0.0  0.0888\n8  AS3   Activity  0.4439  4.4393e-01   5.0000     0.0   0.0  0.0888\n9  AS4   Activity  0.0888  8.8786e-02   1.0000     0.0   0.0  0.0888\ngetRawAvgTables method not yet implemented\n",
            "numerical_values": [
              0.0,
              1.0,
              0.14206,
              0.0,
              0.0,
              1.0,
              2.0,
              0.53271,
              0.0,
              0.0,
              2.0,
              1.0,
              1.1215,
              0.14206,
              0.0,
              0.0,
              0.0888,
              3.0,
              2.0,
              0.5327,
              0.53271,
              0.0,
              0.0,
              0.0888,
              4.0,
              1.0,
              1.1215,
              0.14206,
              12.631,
              0.0,
              0.0,
              0.0888,
              5.0,
              2.0,
              0.5327,
              0.53271,
              6.0,
              0.0,
              0.0,
              0.0888,
              6.0,
              1.0,
              0.1627,
              0.14206,
              1.8327,
              0.0,
              0.0,
              0.0888,
              7.0,
              2.0,
              0.9587,
              8.8786e-10,
              10.7983,
              0.0,
              0.0,
              0.0888,
              8.0,
              3.0,
              0.4439,
              0.44393,
              5.0,
              0.0,
              0.0,
              0.0888,
              9.0,
              4.0,
              0.0888,
              0.088786,
              1.0,
              0.0,
              0.0,
              0.0888,
              1.0,
              0.0,
              1.0,
              0.14206,
              0.0,
              0.0,
              1.0,
              2.0,
              0.53271,
              0.0,
              0.0,
              2.0,
              1.0,
              1.1215,
              0.14206,
              0.0,
              0.0,
              0.0888,
              3.0,
              2.0,
              0.5327,
              0.53271,
              0.0,
              0.0,
              0.0888,
              4.0,
              1.0,
              1.1215,
              0.14206,
              12.631,
              0.0,
              0.0,
              0.0888,
              5.0,
              2.0,
              0.5327,
              0.53271,
              6.0,
              0.0,
              0.0,
              0.0888,
              6.0,
              1.0,
              0.1627,
              0.14206,
              1.8327,
              0.0,
              0.0,
              0.0888,
              7.0,
              2.0,
              0.9587,
              8.8786e-10,
              10.7983,
              0.0,
              0.0,
              0.0888,
              8.0,
              3.0,
              0.4439,
              0.44393,
              5.0,
              0.0,
              0.0,
              0.0888,
              9.0,
              4.0,
              0.0888,
              0.088786,
              1.0,
              0.0,
              0.0,
              0.0888
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Node   NodeType    QLen    Util    RespT  ResidT  ArvR    Tput\n0   P1  Processor     NaN  0.1420      NaN     NaN   NaN     NaN\n1   P2  Processor     NaN  0.5326      NaN     NaN   NaN     NaN\n2   T1       Task  1.1241  0.1420      NaN  1.8303   NaN  0.0888\n3   T2       Task  0.5326  0.5326      NaN  6.0000   NaN  0.0888\n4   E1      Entry  1.1241     NaN  12.6642     NaN   NaN  0.0888\n5   E2      Entry  0.5326     NaN   6.0000     NaN   NaN  0.0888\n6  AS1   Activity  0.1625  0.1420   1.8303  1.8303   NaN  0.0888\n7  AS2   Activity  0.9616  0.0000  10.8338  0.0000   NaN  0.0888\n8  AS3   Activity  0.4438  0.4438   5.0000  5.0000   NaN  0.0888\n9  AS4   Activity  0.0888  0.0888   1.0000  1.0000   NaN  0.0888\nAvgTable[3]:\n  Node   NodeType    QLen    Util    RespT  ResidT  ArvR    Tput\n0   P1  Processor     NaN  0.1420      NaN     NaN   NaN     NaN\n1   P2  Processor     NaN  0.5326      NaN     NaN   NaN     NaN\n2   T1       Task  1.1241  0.1420      NaN  1.8303   NaN  0.0888\n3   T2       Task  0.5326  0.5326      NaN  6.0000   NaN  0.0888\n4   E1      Entry  1.1241     NaN  12.6642     NaN   NaN  0.0888\n5   E2      Entry  0.5326     NaN   6.0000     NaN   NaN  0.0888\n6  AS1   Activity  0.1625  0.1420   1.8303  1.8303   NaN  0.0888\n7  AS2   Activity  0.9616  0.0000  10.8338  0.0000   NaN  0.0888\n8  AS3   Activity  0.4438  0.4438   5.0000  5.0000   NaN  0.0888\n9  AS4   Activity  0.0888  0.0888   1.0000  1.0000   NaN  0.0888\n",
            "numerical_values": [
              0.0,
              1.0,
              0.142,
              1.0,
              2.0,
              0.5326,
              2.0,
              1.0,
              1.1241,
              0.142,
              1.8303,
              0.0888,
              3.0,
              2.0,
              0.5326,
              0.5326,
              6.0,
              0.0888,
              4.0,
              1.0,
              1.1241,
              12.6642,
              0.0888,
              5.0,
              2.0,
              0.5326,
              6.0,
              0.0888,
              6.0,
              1.0,
              0.1625,
              0.142,
              1.8303,
              1.8303,
              0.0888,
              7.0,
              2.0,
              0.9616,
              0.0,
              10.8338,
              0.0,
              0.0888,
              8.0,
              3.0,
              0.4438,
              0.4438,
              5.0,
              5.0,
              0.0888,
              9.0,
              4.0,
              0.0888,
              0.0888,
              1.0,
              1.0,
              0.0888,
              3.0,
              0.0,
              1.0,
              0.142,
              1.0,
              2.0,
              0.5326,
              2.0,
              1.0,
              1.1241,
              0.142,
              1.8303,
              0.0888,
              3.0,
              2.0,
              0.5326,
              0.5326,
              6.0,
              0.0888,
              4.0,
              1.0,
              1.1241,
              12.6642,
              0.0888,
              5.0,
              2.0,
              0.5326,
              6.0,
              0.0888,
              6.0,
              1.0,
              0.1625,
              0.142,
              1.8303,
              1.8303,
              0.0888,
              7.0,
              2.0,
              0.9616,
              0.0,
              10.8338,
              0.0,
              0.0888,
              8.0,
              3.0,
              0.4438,
              0.4438,
              5.0,
              5.0,
              0.0888,
              9.0,
              4.0,
              0.0888,
              0.0888,
              1.0,
              1.0,
              0.0888
            ]
          }
        }
      ],
      "execution_count": 3
    }
  },
  "numerical_summary": {
    "cell_2": [
      0.0,
      1.0,
      0.14206,
      0.0,
      0.0,
      1.0,
      2.0,
      0.53271,
      0.0,
      0.0,
      2.0,
      1.0,
      1.1215,
      0.14206,
      0.0,
      0.0,
      0.0888,
      3.0,
      2.0,
      0.5327,
      0.53271,
      0.0,
      0.0,
      0.0888,
      4.0,
      1.0,
      1.1215,
      0.14206,
      12.631,
      0.0,
      0.0,
      0.0888,
      5.0,
      2.0,
      0.5327,
      0.53271,
      6.0,
      0.0,
      0.0,
      0.0888,
      6.0,
      1.0,
      0.1627,
      0.14206,
      1.8327,
      0.0,
      0.0,
      0.0888,
      7.0,
      2.0,
      0.9587,
      8.8786e-10,
      10.7983,
      0.0,
      0.0,
      0.0888,
      8.0,
      3.0,
      0.4439,
      0.44393,
      5.0,
      0.0,
      0.0,
      0.0888,
      9.0,
      4.0,
      0.0888,
      0.088786,
      1.0,
      0.0,
      0.0,
      0.0888,
      1.0,
      0.0,
      1.0,
      0.14206,
      0.0,
      0.0,
      1.0,
      2.0,
      0.53271,
      0.0,
      0.0,
      2.0,
      1.0,
      1.1215,
      0.14206,
      0.0,
      0.0,
      0.0888,
      3.0,
      2.0,
      0.5327,
      0.53271,
      0.0,
      0.0,
      0.0888,
      4.0,
      1.0,
      1.1215,
      0.14206,
      12.631,
      0.0,
      0.0,
      0.0888,
      5.0,
      2.0,
      0.5327,
      0.53271,
      6.0,
      0.0,
      0.0,
      0.0888,
      6.0,
      1.0,
      0.1627,
      0.14206,
      1.8327,
      0.0,
      0.0,
      0.0888,
      7.0,
      2.0,
      0.9587,
      8.8786e-10,
      10.7983,
      0.0,
      0.0,
      0.0888,
      8.0,
      3.0,
      0.4439,
      0.44393,
      5.0,
      0.0,
      0.0,
      0.0888,
      9.0,
      4.0,
      0.0888,
      0.088786,
      1.0,
      0.0,
      0.0,
      0.0888,
      0.0,
      1.0,
      0.142,
      1.0,
      2.0,
      0.5326,
      2.0,
      1.0,
      1.1241,
      0.142,
      1.8303,
      0.0888,
      3.0,
      2.0,
      0.5326,
      0.5326,
      6.0,
      0.0888,
      4.0,
      1.0,
      1.1241,
      12.6642,
      0.0888,
      5.0,
      2.0,
      0.5326,
      6.0,
      0.0888,
      6.0,
      1.0,
      0.1625,
      0.142,
      1.8303,
      1.8303,
      0.0888,
      7.0,
      2.0,
      0.9616,
      0.0,
      10.8338,
      0.0,
      0.0888,
      8.0,
      3.0,
      0.4438,
      0.4438,
      5.0,
      5.0,
      0.0888,
      9.0,
      4.0,
      0.0888,
      0.0888,
      1.0,
      1.0,
      0.0888,
      3.0,
      0.0,
      1.0,
      0.142,
      1.0,
      2.0,
      0.5326,
      2.0,
      1.0,
      1.1241,
      0.142,
      1.8303,
      0.0888,
      3.0,
      2.0,
      0.5326,
      0.5326,
      6.0,
      0.0888,
      4.0,
      1.0,
      1.1241,
      12.6642,
      0.0888,
      5.0,
      2.0,
      0.5326,
      6.0,
      0.0888,
      6.0,
      1.0,
      0.1625,
      0.142,
      1.8303,
      1.8303,
      0.0888,
      7.0,
      2.0,
      0.9616,
      0.0,
      10.8338,
      0.0,
      0.0888,
      8.0,
      3.0,
      0.4438,
      0.4438,
      5.0,
      5.0,
      0.0888,
      9.0,
      4.0,
      0.0888,
      0.0888,
      1.0,
      1.0,
      0.0888
    ]
  },
  "metadata": {
    "notebook_path": "layeredModel/lqn_serial.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 3,
    "code_cells": 3,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}