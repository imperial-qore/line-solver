{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport os\n\nGlobalConstants.set_verbose(VerboseLevel.SILENT)\n\nprint('This example illustrates the initialization of LN using the output of LQNS.')\n\n# Load model from XML file (in same directory as notebook)\nmodel = LayeredNetwork.parse_xml('lqn_serial.xml')",
      "metadata": {
        "execution": {
          "iopub.status.busy": "2026-01-02T14:10:01.951804Z",
          "iopub.execute_input": "2026-01-02T14:10:01.951943Z",
          "iopub.status.idle": "2026-01-02T14:10:02.982198Z",
          "shell.execute_reply": "2026-01-02T14:10:02.981874Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "This example illustrates the initialization of LN using the output of LQNS.\n"
          }
        }
      ],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "# Set options for LQNS solver\noptions = LQNS.default_options()\noptions.keep = True  # Keep intermediate XML files\n\n# Solve the model using LQNS if available\nif LQNS.isAvailable():\n    lqns_solver = LQNS(model, options)\n    try:\n        avg_table_lqns = lqns_solver.avg_table()\n        print('LQNS Solver Results:')\n        print(avg_table_lqns)\n    except Exception as e:\n        print(f'LQNS solver error: {e}')\nelse:\n    print('LQNS solver not available - skipping')",
      "metadata": {
        "execution": {
          "iopub.status.busy": "2026-01-02T14:10:02.983167Z",
          "iopub.execute_input": "2026-01-02T14:10:02.983328Z",
          "iopub.status.idle": "2026-01-02T14:10:03.107331Z",
          "shell.execute_reply": "2026-01-02T14:10:03.107051Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Node   NodeType     QLen        Util    RespT  ResidT  ArvR    Tput\n0   P1  Processor      NaN  2.6658e-01      NaN     0.0   0.0     NaN\n1   P2  Processor      NaN  9.9968e-01      NaN     0.0   0.0     NaN\n2   T1    RefTask  10.0000  2.6658e-01      NaN     0.0   0.0  0.1666\n3   T2       Task   0.9997  9.9968e-01      NaN     0.0   0.0  0.1666\n4   E1      Entry  10.0000  2.6658e-01  60.0194     0.0   0.0  0.1666\n5   E2      Entry   0.9997  9.9968e-01   6.0000     0.0   0.0  0.1666\n6  AS1   Activity   0.3623  2.6658e-01   2.1748     0.0   0.0  0.1666\n7  AS2   Activity   9.6377  1.6661e-09  57.8446     0.0   0.0  0.1666\n8  AS3   Activity   0.8331  8.3306e-01   5.0000     0.0   0.0  0.1666\n9  AS4   Activity   0.1666  1.6661e-01   1.0000     0.0   0.0  0.1666\nLQNS Solver Results:\n  Node   NodeType     QLen        Util    RespT  ResidT  ArvR    Tput\n0   P1  Processor      NaN  2.6658e-01      NaN     0.0   0.0     NaN\n1   P2  Processor      NaN  9.9968e-01      NaN     0.0   0.0     NaN\n2   T1    RefTask  10.0000  2.6658e-01      NaN     0.0   0.0  0.1666\n3   T2       Task   0.9997  9.9968e-01      NaN     0.0   0.0  0.1666\n4   E1      Entry  10.0000  2.6658e-01  60.0194     0.0   0.0  0.1666\n5   E2      Entry   0.9997  9.9968e-01   6.0000     0.0   0.0  0.1666\n6  AS1   Activity   0.3623  2.6658e-01   2.1748     0.0   0.0  0.1666\n7  AS2   Activity   9.6377  1.6661e-09  57.8446     0.0   0.0  0.1666\n8  AS3   Activity   0.8331  8.3306e-01   5.0000     0.0   0.0  0.1666\n9  AS4   Activity   0.1666  1.6661e-01   1.0000     0.0   0.0  0.1666\n",
            "numerical_values": [
              0.0,
              1.0,
              0.26658,
              0.0,
              0.0,
              1.0,
              2.0,
              0.99968,
              0.0,
              0.0,
              2.0,
              1.0,
              10.0,
              0.26658,
              0.0,
              0.0,
              0.1666,
              3.0,
              2.0,
              0.9997,
              0.99968,
              0.0,
              0.0,
              0.1666,
              4.0,
              1.0,
              10.0,
              0.26658,
              60.0194,
              0.0,
              0.0,
              0.1666,
              5.0,
              2.0,
              0.9997,
              0.99968,
              6.0,
              0.0,
              0.0,
              0.1666,
              6.0,
              1.0,
              0.3623,
              0.26658,
              2.1748,
              0.0,
              0.0,
              0.1666,
              7.0,
              2.0,
              9.6377,
              1.6661e-09,
              57.8446,
              0.0,
              0.0,
              0.1666,
              8.0,
              3.0,
              0.8331,
              0.83306,
              5.0,
              0.0,
              0.0,
              0.1666,
              9.0,
              4.0,
              0.1666,
              0.16661,
              1.0,
              0.0,
              0.0,
              0.1666,
              0.0,
              1.0,
              0.26658,
              0.0,
              0.0,
              1.0,
              2.0,
              0.99968,
              0.0,
              0.0,
              2.0,
              1.0,
              10.0,
              0.26658,
              0.0,
              0.0,
              0.1666,
              3.0,
              2.0,
              0.9997,
              0.99968,
              0.0,
              0.0,
              0.1666,
              4.0,
              1.0,
              10.0,
              0.26658,
              60.0194,
              0.0,
              0.0,
              0.1666,
              5.0,
              2.0,
              0.9997,
              0.99968,
              6.0,
              0.0,
              0.0,
              0.1666,
              6.0,
              1.0,
              0.3623,
              0.26658,
              2.1748,
              0.0,
              0.0,
              0.1666,
              7.0,
              2.0,
              9.6377,
              1.6661e-09,
              57.8446,
              0.0,
              0.0,
              0.1666,
              8.0,
              3.0,
              0.8331,
              0.83306,
              5.0,
              0.0,
              0.0,
              0.1666,
              9.0,
              4.0,
              0.1666,
              0.16661,
              1.0,
              0.0,
              0.0,
              0.1666
            ]
          }
        }
      ],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Solve with LN without initialization\nprint('\\nSolve with LN without initialization:')\nln_solver = LN(model, lambda x: MVA(x))\nimport time\nstart_time = time.time()\ntry:\n    avg_table = ln_solver.avg_table()\n    end_time = time.time()\n    time_elapsed = end_time - start_time\n    \n    print('AvgTable:')\n    print(avg_table)\n    print(f'Time elapsed: {time_elapsed:.3f}s')\nexcept Exception as e:\n    print(f'LN solver error: {e}')",
      "metadata": {
        "execution": {
          "iopub.status.busy": "2026-01-02T14:10:03.108233Z",
          "iopub.execute_input": "2026-01-02T14:10:03.108388Z",
          "shell.execute_reply": "2026-01-02T14:10:03.356810Z",
          "iopub.status.idle": "2026-01-02T14:10:03.357119Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "\nSolve with LN without initialization:\n"
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "  Node   NodeType     QLen    Util    RespT  ResidT  ArvR    Tput\n0   P1  Processor      NaN  0.2667      NaN     NaN   NaN     NaN\n1   P2  Processor      NaN  1.0000      NaN     NaN   NaN     NaN\n2   T1       Task  10.0002  0.2667      NaN  2.0849   NaN  0.1667\n3   T2       Task   1.0000  1.0000      NaN  6.0000   NaN  0.1667\n4   E1      Entry  10.0002     NaN  60.0000     NaN   NaN  0.1667\n5   E2      Entry   1.0000     NaN   6.0000     NaN   NaN  0.1667\n6  AS1   Activity   0.3475  0.2667   2.0849  2.0849   NaN  0.1667\n7  AS2   Activity   9.6527  0.0000  57.9151  0.0000   NaN  0.1667\n8  AS3   Activity   0.8333  0.8333   5.0000  5.0000   NaN  0.1667\n9  AS4   Activity   0.1667  0.1667   1.0000  1.0000   NaN  0.1667\nAvgTable:\n  Node   NodeType     QLen    Util    RespT  ResidT  ArvR    Tput\n0   P1  Processor      NaN  0.2667      NaN     NaN   NaN     NaN\n1   P2  Processor      NaN  1.0000      NaN     NaN   NaN     NaN\n2   T1       Task  10.0002  0.2667      NaN  2.0849   NaN  0.1667\n3   T2       Task   1.0000  1.0000      NaN  6.0000   NaN  0.1667\n4   E1      Entry  10.0002     NaN  60.0000     NaN   NaN  0.1667\n5   E2      Entry   1.0000     NaN   6.0000     NaN   NaN  0.1667\n6  AS1   Activity   0.3475  0.2667   2.0849  2.0849   NaN  0.1667\n7  AS2   Activity   9.6527  0.0000  57.9151  0.0000   NaN  0.1667\n8  AS3   Activity   0.8333  0.8333   5.0000  5.0000   NaN  0.1667\n9  AS4   Activity   0.1667  0.1667   1.0000  1.0000   NaN  0.1667\nTime elapsed: 0.214s\n",
            "numerical_values": [
              0.0,
              1.0,
              0.2667,
              1.0,
              2.0,
              1.0,
              2.0,
              1.0,
              10.0002,
              0.2667,
              2.0849,
              0.1667,
              3.0,
              2.0,
              1.0,
              1.0,
              6.0,
              0.1667,
              4.0,
              1.0,
              10.0002,
              60.0,
              0.1667,
              5.0,
              2.0,
              1.0,
              6.0,
              0.1667,
              6.0,
              1.0,
              0.3475,
              0.2667,
              2.0849,
              2.0849,
              0.1667,
              7.0,
              2.0,
              9.6527,
              0.0,
              57.9151,
              0.0,
              0.1667,
              8.0,
              3.0,
              0.8333,
              0.8333,
              5.0,
              5.0,
              0.1667,
              9.0,
              4.0,
              0.1667,
              0.1667,
              1.0,
              1.0,
              0.1667,
              0.0,
              1.0,
              0.2667,
              1.0,
              2.0,
              1.0,
              2.0,
              1.0,
              10.0002,
              0.2667,
              2.0849,
              0.1667,
              3.0,
              2.0,
              1.0,
              1.0,
              6.0,
              0.1667,
              4.0,
              1.0,
              10.0002,
              60.0,
              0.1667,
              5.0,
              2.0,
              1.0,
              6.0,
              0.1667,
              6.0,
              1.0,
              0.3475,
              0.2667,
              2.0849,
              2.0849,
              0.1667,
              7.0,
              2.0,
              9.6527,
              0.0,
              57.9151,
              0.0,
              0.1667,
              8.0,
              3.0,
              0.8333,
              0.8333,
              5.0,
              5.0,
              0.1667,
              9.0,
              4.0,
              0.1667,
              0.1667,
              1.0,
              1.0,
              0.1667,
              0.214
            ]
          }
        }
      ],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# Obtain the CDF of response times\nprint('\\nWe now obtain the CDF of response times:')\ntry:\n    ensemble = model.ensemble\n    if ensemble is not None and len(ensemble) >= 3:\n        fluid_solver = FLD(ensemble[2])  # ensemble[2] in Python (0-indexed)\n        rd = fluid_solver.cdf_resp_t()\n        print('RD (CDF of response times):')\n        print(rd)\n    else:\n        print('Model ensemble not available or insufficient layers')\nexcept Exception as e:\n    print(f'CDF computation not available: {e}')\n    print('Fluid solver and ensemble access not yet fully implemented')",
      "metadata": {
        "execution": {
          "iopub.status.busy": "2026-01-02T14:10:03.358104Z",
          "iopub.execute_input": "2026-01-02T14:10:03.358211Z",
          "shell.execute_reply": "2026-01-02T14:10:03.360339Z",
          "iopub.status.idle": "2026-01-02T14:10:03.360673Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "\nWe now obtain the CDF of response times:\nCDF computation not available: 'LayeredNetwork' object has no attribute 'ensemble'\nFluid solver and ensemble access not yet fully implemented\n"
          }
        }
      ],
      "execution_count": 4
    }
  },
  "numerical_summary": {
    "cell_1": [
      0.0,
      1.0,
      0.26658,
      0.0,
      0.0,
      1.0,
      2.0,
      0.99968,
      0.0,
      0.0,
      2.0,
      1.0,
      10.0,
      0.26658,
      0.0,
      0.0,
      0.1666,
      3.0,
      2.0,
      0.9997,
      0.99968,
      0.0,
      0.0,
      0.1666,
      4.0,
      1.0,
      10.0,
      0.26658,
      60.0194,
      0.0,
      0.0,
      0.1666,
      5.0,
      2.0,
      0.9997,
      0.99968,
      6.0,
      0.0,
      0.0,
      0.1666,
      6.0,
      1.0,
      0.3623,
      0.26658,
      2.1748,
      0.0,
      0.0,
      0.1666,
      7.0,
      2.0,
      9.6377,
      1.6661e-09,
      57.8446,
      0.0,
      0.0,
      0.1666,
      8.0,
      3.0,
      0.8331,
      0.83306,
      5.0,
      0.0,
      0.0,
      0.1666,
      9.0,
      4.0,
      0.1666,
      0.16661,
      1.0,
      0.0,
      0.0,
      0.1666,
      0.0,
      1.0,
      0.26658,
      0.0,
      0.0,
      1.0,
      2.0,
      0.99968,
      0.0,
      0.0,
      2.0,
      1.0,
      10.0,
      0.26658,
      0.0,
      0.0,
      0.1666,
      3.0,
      2.0,
      0.9997,
      0.99968,
      0.0,
      0.0,
      0.1666,
      4.0,
      1.0,
      10.0,
      0.26658,
      60.0194,
      0.0,
      0.0,
      0.1666,
      5.0,
      2.0,
      0.9997,
      0.99968,
      6.0,
      0.0,
      0.0,
      0.1666,
      6.0,
      1.0,
      0.3623,
      0.26658,
      2.1748,
      0.0,
      0.0,
      0.1666,
      7.0,
      2.0,
      9.6377,
      1.6661e-09,
      57.8446,
      0.0,
      0.0,
      0.1666,
      8.0,
      3.0,
      0.8331,
      0.83306,
      5.0,
      0.0,
      0.0,
      0.1666,
      9.0,
      4.0,
      0.1666,
      0.16661,
      1.0,
      0.0,
      0.0,
      0.1666
    ],
    "cell_2": [
      0.0,
      1.0,
      0.2667,
      1.0,
      2.0,
      1.0,
      2.0,
      1.0,
      10.0002,
      0.2667,
      2.0849,
      0.1667,
      3.0,
      2.0,
      1.0,
      1.0,
      6.0,
      0.1667,
      4.0,
      1.0,
      10.0002,
      60.0,
      0.1667,
      5.0,
      2.0,
      1.0,
      6.0,
      0.1667,
      6.0,
      1.0,
      0.3475,
      0.2667,
      2.0849,
      2.0849,
      0.1667,
      7.0,
      2.0,
      9.6527,
      0.0,
      57.9151,
      0.0,
      0.1667,
      8.0,
      3.0,
      0.8333,
      0.8333,
      5.0,
      5.0,
      0.1667,
      9.0,
      4.0,
      0.1667,
      0.1667,
      1.0,
      1.0,
      0.1667,
      0.0,
      1.0,
      0.2667,
      1.0,
      2.0,
      1.0,
      2.0,
      1.0,
      10.0002,
      0.2667,
      2.0849,
      0.1667,
      3.0,
      2.0,
      1.0,
      1.0,
      6.0,
      0.1667,
      4.0,
      1.0,
      10.0002,
      60.0,
      0.1667,
      5.0,
      2.0,
      1.0,
      6.0,
      0.1667,
      6.0,
      1.0,
      0.3475,
      0.2667,
      2.0849,
      2.0849,
      0.1667,
      7.0,
      2.0,
      9.6527,
      0.0,
      57.9151,
      0.0,
      0.1667,
      8.0,
      3.0,
      0.8333,
      0.8333,
      5.0,
      5.0,
      0.1667,
      9.0,
      4.0,
      0.1667,
      0.1667,
      1.0,
      1.0,
      0.1667,
      0.214,
      0.3
    ],
    "cell_3": [
      3.0,
      2.0,
      2.0,
      0.0
    ]
  },
  "metadata": {
    "notebook_path": "layeredModel/lqn_init.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 4,
    "code_cells": 4,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}