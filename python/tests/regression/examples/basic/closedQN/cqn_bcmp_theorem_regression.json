{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\n\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:15:12.668286Z",
          "start_time": "2025-07-30T22:15:11.800278Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:34.132366Z",
          "iopub.execute_input": "2026-01-03T15:31:34.132581Z",
          "iopub.status.idle": "2026-01-03T15:31:34.948654Z",
          "shell.execute_reply": "2026-01-03T15:31:34.948079Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "#Comparison of product-form scheduling policies\nc = 1",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:15:12.675722Z",
          "start_time": "2025-07-30T22:15:12.673485Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:34.952916Z",
          "iopub.execute_input": "2026-01-03T15:31:34.953287Z",
          "shell.execute_reply": "2026-01-03T15:31:34.954783Z",
          "iopub.status.idle": "2026-01-03T15:31:34.955694Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# PS (Processor Sharing) Model\npsmodel = Network('PS scheduling model')\n\nnode = np.empty(2, dtype = object)\nnode[0] = Delay(psmodel, 'Delay')\nnode[1] = Queue(psmodel, 'Queue1', SchedStrategy.PS)\nnode[1].set_number_of_servers(c)\n\njobclass = np.empty(2, dtype = object)\njobclass[0] = ClosedClass(psmodel, 'Class1', 2, node[0], 0)\njobclass[1] = ClosedClass(psmodel, 'Class2', 2, node[0], 0)\n\nnode[0].set_service(jobclass[0], Erlang(3, 2))\nnode[0].set_service(jobclass[1], HyperExp(0.5, 3.0, 10.0))\nnode[1].set_service(jobclass[0], Exp(1))\nnode[1].set_service(jobclass[1], Exp(1))\n\nP = psmodel.init_routing_matrix()\nP.set(jobclass[0], jobclass[0], node[0], node[1], 1.0)\nP.set(jobclass[0], jobclass[0], node[1], node[0], 1.0)\nP.set(jobclass[1], jobclass[1], node[0], node[1], 1.0)\nP.set(jobclass[1], jobclass[1], node[1], node[0], 1.0)\npsmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:15:12.750891Z",
          "start_time": "2025-07-30T22:15:12.729089Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:34.957028Z",
          "iopub.execute_input": "2026-01-03T15:31:34.957186Z",
          "shell.execute_reply": "2026-01-03T15:31:34.961403Z",
          "iopub.status.idle": "2026-01-03T15:31:34.962006Z"
        }
      },
      "outputs": [],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# FCFS (First-Come-First-Served) Model\nfcfsmodel = Network('FCFS scheduling model')\n\nnode = np.empty(2, dtype = object)\nnode[0] = Delay(fcfsmodel, 'Delay')\nnode[1] = Queue(fcfsmodel, 'Queue1', SchedStrategy.FCFS)\nnode[1].set_number_of_servers(c)\njobclass = np.empty(2, dtype = object)\njobclass[0] = ClosedClass(fcfsmodel, 'Class1', 2, node[0], 0)\njobclass[1] = ClosedClass(fcfsmodel, 'Class2', 2, node[0], 0)\nnode[0].set_service(jobclass[0], Erlang(3, 2))\nnode[0].set_service(jobclass[1], HyperExp(0.5, 3.0, 10.0))\nnode[1].set_service(jobclass[0], Exp(1))\nnode[1].set_service(jobclass[1], Exp(1))\nP = fcfsmodel.init_routing_matrix()\nP.set(jobclass[0], jobclass[0], node[0], node[1], 1.0)\nP.set(jobclass[0], jobclass[0], node[1], node[0], 1.0)\nP.set(jobclass[1], jobclass[1], node[0], node[1], 1.0)\nP.set(jobclass[1], jobclass[1], node[1], node[0], 1.0)\nfcfsmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:15:12.792090Z",
          "start_time": "2025-07-30T22:15:12.788963Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:34.963296Z",
          "iopub.execute_input": "2026-01-03T15:31:34.963479Z",
          "shell.execute_reply": "2026-01-03T15:31:34.967556Z",
          "iopub.status.idle": "2026-01-03T15:31:34.968108Z"
        }
      },
      "outputs": [],
      "execution_count": 4
    },
    "cell_4": {
      "cell_type": "code",
      "source": "# LCFS-PR (Last-Come-First-Served Preemptive Resume) Model\nlcfsprmodel = Network('LCFS-PR scheduling model')\n\nnode = np.empty(2, dtype = object)\nnode[0] = Delay(lcfsprmodel, 'Delay')\nnode[1] = Queue(lcfsprmodel, 'Queue1', SchedStrategy.LCFSPR)\nnode[1].set_number_of_servers(c)\njobclass = np.empty(2, dtype = object)\njobclass[0] = ClosedClass(lcfsprmodel, 'Class1', 2, node[0], 0)\njobclass[1] = ClosedClass(lcfsprmodel, 'Class2', 2, node[0], 0)\nnode[0].set_service(jobclass[0], Erlang(3, 2))\nnode[0].set_service(jobclass[1], HyperExp(0.5, 3.0, 10.0))\nnode[1].set_service(jobclass[0], Exp(1))\nnode[1].set_service(jobclass[1], Exp(1))\nP = lcfsprmodel.init_routing_matrix()\nP.set(jobclass[0], jobclass[0], node[0], node[1], 1.0)\nP.set(jobclass[0], jobclass[0], node[1], node[0], 1.0)\nP.set(jobclass[1], jobclass[1], node[0], node[1], 1.0)\nP.set(jobclass[1], jobclass[1], node[1], node[0], 1.0)\nlcfsprmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:15:12.844924Z",
          "start_time": "2025-07-30T22:15:12.841847Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:34.969672Z",
          "iopub.execute_input": "2026-01-03T15:31:34.969867Z",
          "shell.execute_reply": "2026-01-03T15:31:34.974111Z",
          "iopub.status.idle": "2026-01-03T15:31:34.974638Z"
        }
      },
      "outputs": [],
      "execution_count": 5
    },
    "cell_5": {
      "cell_type": "code",
      "source": "# Aligned with JAR test scenarios for cqn_bcmp_theorem\n# JAR tests: PS-CTMC(), FCFS-CTMC(), LCFSPR-CTMC()\n\n# Solve all models with CTMC solver (matches JAR)\nmodels = [psmodel, fcfsmodel, lcfsprmodel]\nmodel_names = ['PS scheduling model', 'FCFS scheduling model', 'LCFS-PR scheduling model']\nfor i, model in enumerate(models):\n    print(f'MODEL: {model_names[i]}')\n    solver = CTMC(model)\n    avgTable = solver.avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:15:13.073542Z",
          "start_time": "2025-07-30T22:15:12.890557Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:34.976261Z",
          "iopub.execute_input": "2026-01-03T15:31:34.976445Z",
          "shell.execute_reply": "2026-01-03T15:31:34.998670Z",
          "iopub.status.idle": "2026-01-03T15:31:34.999268Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "MODEL: PS scheduling model\nStation JobClass   QLen   Util  RespT  ResidT   ArvR   Tput\n  Delay   Class1 0.3086 0.3086 0.6667  0.6667 0.4629 0.4629\n  Delay   Class2 0.1162 0.1162 0.2167  0.2167 0.5365 0.5365\n Queue1   Class1 1.6914 0.4629 3.6538  3.6538 0.4629 0.4629\n Queue1   Class2 1.8838 0.5365 3.5110  3.5110 0.5365 0.5365\nMODEL: FCFS scheduling model\nStation JobClass   QLen   Util  RespT  ResidT   ArvR   Tput\n  Delay   Class1 0.3086 0.3086 0.6667  0.6667 0.4629 0.4629\n  Delay   Class2 0.1162 0.1162 0.2167  0.2167 0.5365 0.5365\n Queue1   Class1 1.6914 0.4629 3.6538  3.6538 0.4629 0.4629\n Queue1   Class2 1.8838 0.5365 3.5110  3.5110 0.5365 0.5365\nMODEL: LCFS-PR scheduling model\nStation JobClass   QLen   Util  RespT  ResidT   ArvR   Tput\n  Delay   Class1 0.3086 0.3086 0.6667  0.6667 0.4629 0.4629\n  Delay   Class2 0.1162 0.1162 0.2167  0.2167 0.5365 0.5365\n Queue1   Class1 1.6914 0.4629 3.6538  3.6538 0.4629 0.4629\n Queue1   Class2 1.8838 0.5365 3.5110  3.5110 0.5365 0.5365\n",
            "numerical_values": [
              1.0,
              0.3086,
              0.3086,
              0.6667,
              0.6667,
              0.4629,
              0.4629,
              2.0,
              0.1162,
              0.1162,
              0.2167,
              0.2167,
              0.5365,
              0.5365,
              1.0,
              1.0,
              1.6914,
              0.4629,
              3.6538,
              3.6538,
              0.4629,
              0.4629,
              1.0,
              2.0,
              1.8838,
              0.5365,
              3.511,
              3.511,
              0.5365,
              0.5365,
              1.0,
              0.3086,
              0.3086,
              0.6667,
              0.6667,
              0.4629,
              0.4629,
              2.0,
              0.1162,
              0.1162,
              0.2167,
              0.2167,
              0.5365,
              0.5365,
              1.0,
              1.0,
              1.6914,
              0.4629,
              3.6538,
              3.6538,
              0.4629,
              0.4629,
              1.0,
              2.0,
              1.8838,
              0.5365,
              3.511,
              3.511,
              0.5365,
              0.5365,
              1.0,
              0.3086,
              0.3086,
              0.6667,
              0.6667,
              0.4629,
              0.4629,
              2.0,
              0.1162,
              0.1162,
              0.2167,
              0.2167,
              0.5365,
              0.5365,
              1.0,
              1.0,
              1.6914,
              0.4629,
              3.6538,
              3.6538,
              0.4629,
              0.4629,
              1.0,
              2.0,
              1.8838,
              0.5365,
              3.511,
              3.511,
              0.5365,
              0.5365
            ]
          }
        }
      ],
      "execution_count": 6
    }
  },
  "numerical_summary": {
    "cell_1": [
      1.0
    ],
    "cell_5": [
      1.0,
      0.3086,
      0.3086,
      0.6667,
      0.6667,
      0.4629,
      0.4629,
      2.0,
      0.1162,
      0.1162,
      0.2167,
      0.2167,
      0.5365,
      0.5365,
      1.0,
      1.0,
      1.6914,
      0.4629,
      3.6538,
      3.6538,
      0.4629,
      0.4629,
      1.0,
      2.0,
      1.8838,
      0.5365,
      3.511,
      3.511,
      0.5365,
      0.5365,
      1.0,
      0.3086,
      0.3086,
      0.6667,
      0.6667,
      0.4629,
      0.4629,
      2.0,
      0.1162,
      0.1162,
      0.2167,
      0.2167,
      0.5365,
      0.5365,
      1.0,
      1.0,
      1.6914,
      0.4629,
      3.6538,
      3.6538,
      0.4629,
      0.4629,
      1.0,
      2.0,
      1.8838,
      0.5365,
      3.511,
      3.511,
      0.5365,
      0.5365,
      1.0,
      0.3086,
      0.3086,
      0.6667,
      0.6667,
      0.4629,
      0.4629,
      2.0,
      0.1162,
      0.1162,
      0.2167,
      0.2167,
      0.5365,
      0.5365,
      1.0,
      1.0,
      1.6914,
      0.4629,
      3.6538,
      3.6538,
      0.4629,
      0.4629,
      1.0,
      2.0,
      1.8838,
      0.5365,
      3.511,
      3.511,
      0.5365,
      0.5365
    ]
  },
  "metadata": {
    "notebook_path": "closedQN/cqn_bcmp_theorem.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 6,
    "code_cells": 6,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}