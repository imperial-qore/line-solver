{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:13:51.911293Z",
          "start_time": "2025-07-30T22:13:50.969919Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:54.663287Z",
          "iopub.execute_input": "2026-01-03T15:31:54.663370Z",
          "shell.execute_reply": "2026-01-03T15:31:55.173592Z",
          "iopub.status.idle": "2026-01-03T15:31:55.174158Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "model = Network('model')\n# Create models\nnode = np.empty(4, dtype = object)\nnode[0] = ClassSwitch(model, 'CS', [[0, 1], [1, 0]])\nnode[1] = Queue(model, 'Queue1', SchedStrategy.PS)\nnode[2] = Queue(model, 'Queue2', SchedStrategy.PS)\nnode[3] = Queue(model, 'Delay', SchedStrategy.INF)\n\n# Create job classes\njobclass = np.empty(2, dtype = object)\njobclass[0] = ClosedClass(model, 'Class1', 15, node[3], 0)\njobclass[1] = ClosedClass(model, 'Class2', 5, node[3], 0)\n\n# Set service times\nnode[1].set_service(jobclass[0], Exp.fit_mean(1.5))  #mean = 1.5\nnode[1].set_service(jobclass[1], Erlang.fit_mean_and_order(1.5, 2))  #mean = 1.5\n\nnode[2].set_service(jobclass[0], Erlang.fit_mean_and_order(1.5, 2))  #mean = 1.5\nnode[2].set_service(jobclass[1], Exp.fit_mean(1.5))  #mean = 1.5\n\nnode[3].set_service(jobclass[0], Exp.fit_mean(1.0))  #mean = 1\nnode[3].set_service(jobclass[1], Exp.fit_mean(1.0))  #mean = 1\n\n# Add links\nmodel.add_link(node[1], node[0])\nmodel.add_link(node[2], node[0])\nmodel.add_link(node[0], node[3])\nmodel.add_link(node[3], node[1])\nmodel.add_link(node[3], node[2])\n\n# Set routing strategies\nnode[0].set_routing(jobclass[0], RoutingStrategy.RAND)\nnode[1].set_routing(jobclass[0], RoutingStrategy.RAND)\nnode[2].set_routing(jobclass[0], RoutingStrategy.RAND)\nnode[3].set_routing(jobclass[0], RoutingStrategy.RROBIN)\n\nnode[0].set_routing(jobclass[1], RoutingStrategy.RAND)\nnode[1].set_routing(jobclass[1], RoutingStrategy.RAND)\nnode[2].set_routing(jobclass[1], RoutingStrategy.RAND)\nnode[3].set_routing(jobclass[1], RoutingStrategy.WRROBIN, node[1], 1)\nnode[3].set_routing(jobclass[1], RoutingStrategy.WRROBIN, node[2], 2)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:13:52.058913Z",
          "start_time": "2025-07-30T22:13:51.985702Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:55.175352Z",
          "iopub.execute_input": "2026-01-03T15:31:55.175502Z",
          "shell.execute_reply": "2026-01-03T15:31:55.178546Z",
          "iopub.status.idle": "2026-01-03T15:31:55.178906Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Solve with JMT and DES (matches MATLAB)\nsolver = np.array([], dtype = object)\nsolver = np.append(solver, JMT(model, verbose=True, seed=23000))\nsolver = np.append(solver, DES(model, verbose=True, seed=23000))\n\nAvgTable = np.empty(len(solver), dtype = object)\nfor s in range(len(solver)):\n    print(f'\\nSOLVER: {solver[s].get_name()}')\n    AvgTable[s] = solver[s].avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:13:53.164520Z",
          "start_time": "2025-07-30T22:13:52.066586Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:55.179863Z",
          "iopub.execute_input": "2026-01-03T15:31:55.179939Z",
          "shell.execute_reply": "2026-01-03T15:32:00.844685Z",
          "iopub.status.idle": "2026-01-03T15:32:00.845406Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "\nSOLVER: JMT\nSolverJMT command: java -cp /home/gcasale/Dropbox/code/line-dev.git/common/JMT.jar jmt.commandline.Jmt sim /tmp/jmt_6uc4deqk/model.jsimg\n",
            "numerical_values": [
              6.0,
              4.0
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "Station JobClass    QLen   Util   RespT  ResidT   ArvR   Tput\n Queue1   Class1  1.9929 0.5755  4.7997  4.7997 0.3774 0.3774\n Queue1   Class2  0.6083 0.1905  4.6763  4.6763 0.1255 0.1255\n Queue2   Class1  1.7183 0.5821  4.6923  4.6923 0.3805 0.3805\n Queue2   Class2  0.5794 0.1812  4.7154  4.7154 0.1254 0.1254\n  Delay   Class1 11.0061 0.7441 15.1901 15.1901 0.7540 0.7540\n  Delay   Class2  3.7916 0.2534 15.2007 15.2007 0.2533 0.2533\n\nSOLVER: DES\n",
            "numerical_values": [
              1.0,
              1.0,
              1.9929,
              0.5755,
              4.7997,
              4.7997,
              0.3774,
              0.3774,
              1.0,
              2.0,
              0.6083,
              0.1905,
              4.6763,
              4.6763,
              0.1255,
              0.1255,
              2.0,
              1.0,
              1.7183,
              0.5821,
              4.6923,
              4.6923,
              0.3805,
              0.3805,
              2.0,
              2.0,
              0.5794,
              0.1812,
              4.7154,
              4.7154,
              0.1254,
              0.1254,
              1.0,
              11.0061,
              0.7441,
              15.1901,
              15.1901,
              0.754,
              0.754,
              2.0,
              3.7916,
              0.2534,
              15.2007,
              15.2007,
              0.2533,
              0.2533
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "Station JobClass   QLen   Util   RespT  ResidT   ArvR   Tput\n Queue1   Class1 1.4540 0.3729  5.7127  5.7127 0.2492 0.2492\n Queue1   Class2 1.4454 0.3748  5.7058  5.7058 0.2480 0.2480\n Queue2   Class1 1.4780 0.3780  5.8433  5.8433 0.2485 0.2484\n Queue2   Class2 1.4881 0.3760  5.8519  5.8519 0.2496 0.2496\n  Delay   Class1 7.0749 0.5017 14.3289 14.3289 0.4978 0.4977\n  Delay   Class2 7.0596 0.4951 14.2987 14.2987 0.4977 0.4977\n",
            "numerical_values": [
              1.0,
              1.0,
              1.454,
              0.3729,
              5.7127,
              5.7127,
              0.2492,
              0.2492,
              1.0,
              2.0,
              1.4454,
              0.3748,
              5.7058,
              5.7058,
              0.248,
              0.248,
              2.0,
              1.0,
              1.478,
              0.378,
              5.8433,
              5.8433,
              0.2485,
              0.2484,
              2.0,
              2.0,
              1.4881,
              0.376,
              5.8519,
              5.8519,
              0.2496,
              0.2496,
              1.0,
              7.0749,
              0.5017,
              14.3289,
              14.3289,
              0.4978,
              0.4977,
              2.0,
              7.0596,
              0.4951,
              14.2987,
              14.2987,
              0.4977,
              0.4977
            ]
          }
        }
      ],
      "execution_count": 3
    }
  },
  "numerical_summary": {
    "cell_2": [
      6.0,
      4.0,
      1.0,
      1.0,
      1.9929,
      0.5755,
      4.7997,
      4.7997,
      0.3774,
      0.3774,
      1.0,
      2.0,
      0.6083,
      0.1905,
      4.6763,
      4.6763,
      0.1255,
      0.1255,
      2.0,
      1.0,
      1.7183,
      0.5821,
      4.6923,
      4.6923,
      0.3805,
      0.3805,
      2.0,
      2.0,
      0.5794,
      0.1812,
      4.7154,
      4.7154,
      0.1254,
      0.1254,
      1.0,
      11.0061,
      0.7441,
      15.1901,
      15.1901,
      0.754,
      0.754,
      2.0,
      3.7916,
      0.2534,
      15.2007,
      15.2007,
      0.2533,
      0.2533,
      1.0,
      1.0,
      1.454,
      0.3729,
      5.7127,
      5.7127,
      0.2492,
      0.2492,
      1.0,
      2.0,
      1.4454,
      0.3748,
      5.7058,
      5.7058,
      0.248,
      0.248,
      2.0,
      1.0,
      1.478,
      0.378,
      5.8433,
      5.8433,
      0.2485,
      0.2484,
      2.0,
      2.0,
      1.4881,
      0.376,
      5.8519,
      5.8519,
      0.2496,
      0.2496,
      1.0,
      7.0749,
      0.5017,
      14.3289,
      14.3289,
      0.4978,
      0.4977,
      2.0,
      7.0596,
      0.4951,
      14.2987,
      14.2987,
      0.4977,
      0.4977,
      23000.0,
      23000.0
    ]
  },
  "metadata": {
    "notebook_path": "closedQN/cqn_twoclass_erl.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 3,
    "code_cells": 3,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}