{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nimport os\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:23:02.638676Z",
          "start_time": "2025-07-30T22:23:02.636869Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-01T10:30:53.397025Z",
          "iopub.execute_input": "2026-01-01T10:30:53.397155Z",
          "iopub.status.idle": "2026-01-01T10:30:53.912197Z",
          "shell.execute_reply": "2026-01-01T10:30:53.911799Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "# Create the model\nmodel = Network('model')",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:23:02.693128Z",
          "start_time": "2025-07-30T22:23:02.691457Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-01T10:30:53.913246Z",
          "iopub.execute_input": "2026-01-01T10:30:53.913393Z",
          "shell.execute_reply": "2026-01-01T10:30:53.914595Z",
          "iopub.status.idle": "2026-01-01T10:30:53.914859Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Define network nodes\nsource = Source(model, 'Source')\nqueue = Queue(model, 'Queue', SchedStrategy.FCFS)\nsink = Sink(model, 'Sink')",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:23:02.744434Z",
          "start_time": "2025-07-30T22:23:02.740912Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-01T10:30:53.915698Z",
          "iopub.execute_input": "2026-01-01T10:30:53.915776Z",
          "shell.execute_reply": "2026-01-01T10:30:53.917030Z",
          "iopub.status.idle": "2026-01-01T10:30:53.917284Z"
        }
      },
      "outputs": [],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# Define job class\njobclass = OpenClass(model, 'OpenClass', 0)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:23:02.793363Z",
          "start_time": "2025-07-30T22:23:02.790927Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-01T10:30:53.917962Z",
          "iopub.execute_input": "2026-01-01T10:30:53.918037Z",
          "shell.execute_reply": "2026-01-01T10:30:53.919067Z",
          "iopub.status.idle": "2026-01-01T10:30:53.919274Z"
        }
      },
      "outputs": [],
      "execution_count": 4
    },
    "cell_4": {
      "cell_type": "code",
      "source": "# Set arrival process\nsource.set_arrival(jobclass, Exp(1))",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:23:02.843167Z",
          "start_time": "2025-07-30T22:23:02.841304Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-01T10:30:53.919888Z",
          "iopub.execute_input": "2026-01-01T10:30:53.919955Z",
          "iopub.status.idle": "2026-01-01T10:30:53.921138Z",
          "shell.execute_reply": "2026-01-01T10:30:53.920980Z"
        }
      },
      "outputs": [],
      "execution_count": 5
    },
    "cell_5": {
      "cell_type": "code",
      "source": "# Set service process using trace file\n# Find the directory containing this notebook\ncurrent_dir = os.path.dirname(os.path.abspath(''))\ntrace_file_path = os.path.join(current_dir, 'example_trace.txt')\n\n# Check if trace file exists\nif os.path.exists('example_trace.txt'):\n    trace_file_path = 'example_trace.txt'\n    print(f\"Found trace file: {trace_file_path}\")\nelif os.path.exists(trace_file_path):\n    print(f\"Found trace file: {trace_file_path}\")\nelse:\n    print(f\"Warning: Trace file not found at {trace_file_path}\")\n    print(\"Using current directory path: example_trace.txt\")\n    trace_file_path = 'example_trace.txt'\n\n# Set service process using Replayer with the trace file\nqueue.set_service(jobclass, Replayer(trace_file_path))",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:23:02.914649Z",
          "start_time": "2025-07-30T22:23:02.890740Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-01T10:30:53.921941Z",
          "iopub.execute_input": "2026-01-01T10:30:53.922012Z",
          "shell.execute_reply": "2026-01-01T10:30:53.926418Z",
          "iopub.status.idle": "2026-01-01T10:30:53.926619Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "Found trace file: example_trace.txt\n"
          }
        }
      ],
      "execution_count": 6
    },
    "cell_6": {
      "cell_type": "code",
      "source": "# Define network topology using serial routing\nmodel.link(Network.serial_routing(source, queue, sink))",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:23:02.949085Z",
          "start_time": "2025-07-30T22:23:02.946714Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-01T10:30:53.927319Z",
          "iopub.execute_input": "2026-01-01T10:30:53.927405Z",
          "iopub.status.idle": "2026-01-01T10:30:53.928950Z",
          "shell.execute_reply": "2026-01-01T10:30:53.928642Z"
        }
      },
      "outputs": [],
      "execution_count": 7
    },
    "cell_7": {
      "cell_type": "code",
      "source": "# Aligned with JAR test scenarios for oqn_trace_driven\n# JAR tests: JMT(seed=23000), DES(seed=23000)\n\n# Solve using JMT solver with seed=23000 (matches JAR)\nsolver_jmt = JMT(model, seed=23000)\nAvgTable_jmt = solver_jmt.avg_table()\n\n# Solve using DES solver with seed=23000 (matches MATLAB)\nsolver_des = DES(model, seed=23000)\nAvgTable_des = solver_des.avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:23:03.763915Z",
          "start_time": "2025-07-30T22:23:02.999958Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-01T10:30:53.929693Z",
          "iopub.execute_input": "2026-01-01T10:30:53.929783Z",
          "iopub.status.idle": "2026-01-01T10:30:57.029887Z",
          "shell.execute_reply": "2026-01-01T10:30:57.029580Z"
        }
      },
      "outputs": [],
      "execution_count": 8
    }
  },
  "numerical_summary": {
    "cell_3": [
      0.0
    ],
    "cell_4": [
      1.0
    ],
    "cell_7": [
      23000.0,
      23000.0,
      23000.0,
      23000.0,
      23000.0,
      23000.0
    ]
  },
  "metadata": {
    "notebook_path": "openQN/oqn_trace_driven.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 8,
    "code_cells": 8,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}