{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.SILENT)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:20:08.854929Z",
          "start_time": "2025-07-30T22:20:07.874691Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:33:03.091173Z",
          "iopub.execute_input": "2026-01-03T15:33:03.091279Z",
          "shell.execute_reply": "2026-01-03T15:33:03.826688Z",
          "iopub.status.idle": "2026-01-03T15:33:03.827272Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "print('Example of layered model with a function task (FaaS)')\n\nmodel = LayeredNetwork('faas_test_example')\n\n# definition of processors, tasks and entries\nP1 = Processor(model, 'P1', GlobalConstants.MaxInt, SchedStrategy.INF)\nT1 = Task(model, 'T1', 1, SchedStrategy.REF).on(P1)\nE1 = Entry(model, 'E1').on(T1)\n\nP2 = Processor(model, 'P2', 4, SchedStrategy.FCFS)\n# Function task with capacity, scheduling strategy, think time, setup time, and delay-off time\nT2 = FunctionTask(model, 'F2', 6, SchedStrategy.FCFS).on(P2).set_think_time(Exp.fit_mean(8.0))\nT2.setSetupTime(Exp(1.0))      # Cold start time\nT2.setDelayOffTime(Exp(2.0))   # Time before function instance is removed\n\nE2 = Entry(model, 'E2').on(T2)\n\n# definition of activities\nA1 = Activity(model, 'A1', Exp(1.0)).on(T1).bound_to(E1).synch_call(E2, 1)\nA2 = Activity(model, 'A2', Exp(3.0)).on(T2).bound_to(E2).replies_to(E2)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:20:08.935238Z",
          "start_time": "2025-07-30T22:20:08.915805Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:33:03.828986Z",
          "iopub.execute_input": "2026-01-03T15:33:03.829191Z",
          "shell.execute_reply": "2026-01-03T15:33:03.831830Z",
          "iopub.status.idle": "2026-01-03T15:33:03.832230Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "Example of layered model with a function task (FaaS)\n"
          }
        }
      ],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Define a helper function for solver selection (as in original MATLAB)\ndef myFunction(model):\n    \"\"\"Helper function to select appropriate solver for the model\"\"\"\n    # This could implement logic to choose between MVA, MAM, etc.\n    # For now, use MVA as default\n    options = MVA.default_options()\n    options.verbose = 0\n    return MVA(model, options)\n\n# Solve with LN solver using custom function\nlnoptions = LN.default_options()\nlnoptions.verbose = 0\nlnoptions.seed = 2300\n\nsolver = LN(model, myFunction, lnoptions)\navg_table = solver.avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:20:09.092746Z",
          "start_time": "2025-07-30T22:20:08.972953Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:33:03.833239Z",
          "iopub.execute_input": "2026-01-03T15:33:03.833327Z",
          "shell.execute_reply": "2026-01-03T15:33:03.840578Z",
          "iopub.status.idle": "2026-01-03T15:33:03.840966Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "Node  NodeType   QLen       Util        RespT       ResidT       ArvR       Tput\n  P1 Processor 1.0000 1.0000e-06 1000000.0000 1000000.0000 1.0000e-06 1.0000e-06\n  P2 Processor 1.0014 2.0828e-01       1.6027       1.6027 6.2483e-01 6.2483e-01\n  F2      Task 0.5236 8.7260e-02       2.0000       2.0000 2.6178e-01 2.6178e-01\n  E1     Entry 1.0000 1.0000e-06 1000000.0000 1000000.0000 1.0000e-06 1.0000e-06\n  E2     Entry 1.0014 2.0828e-01       1.6027       1.6027 6.2483e-01 6.2483e-01\n",
            "numerical_values": [
              1.0,
              1.0,
              1e-06,
              1000000.0,
              1000000.0,
              1e-06,
              1e-06,
              2.0,
              1.0014,
              0.20828,
              1.6027,
              1.6027,
              0.62483,
              0.62483,
              2.0,
              0.5236,
              0.08726,
              2.0,
              2.0,
              0.26178,
              0.26178,
              1.0,
              1.0,
              1e-06,
              1000000.0,
              1000000.0,
              1e-06,
              1e-06,
              2.0,
              1.0014,
              0.20828,
              1.6027,
              1.6027,
              0.62483,
              0.62483
            ]
          }
        }
      ],
      "execution_count": 3
    }
  },
  "numerical_summary": {
    "cell_2": [
      1.0,
      1.0,
      1e-06,
      1000000.0,
      1000000.0,
      1e-06,
      1e-06,
      2.0,
      1.0014,
      0.20828,
      1.6027,
      1.6027,
      0.62483,
      0.62483,
      2.0,
      0.5236,
      0.08726,
      2.0,
      2.0,
      0.26178,
      0.26178,
      1.0,
      1.0,
      1e-06,
      1000000.0,
      1000000.0,
      1e-06,
      1e-06,
      2.0,
      1.0014,
      0.20828,
      1.6027,
      1.6027,
      0.62483,
      0.62483,
      0.0,
      0.0,
      2300.0
    ]
  },
  "metadata": {
    "notebook_path": "layeredModel/lqn_function.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 3,
    "code_cells": 3,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}