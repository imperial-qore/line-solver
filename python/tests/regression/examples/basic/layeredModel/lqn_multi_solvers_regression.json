{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.SILENT)\n\n# Clear variables (equivalent to MATLAB's clear solver AvgTable)\nsolver = None\nAvgTable = None",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:19:48.747977Z",
          "start_time": "2025-07-30T22:19:47.783495Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:33:06.587653Z",
          "iopub.execute_input": "2026-01-03T15:33:06.587784Z",
          "shell.execute_reply": "2026-01-03T15:33:07.330340Z",
          "iopub.status.idle": "2026-01-03T15:33:07.330976Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "# MATLAB: model = LayeredNetwork('LQN1');\nmodel = LayeredNetwork('LQN1')\n\n# definition of processors, tasks and entries\n# MATLAB: P1 = Processor(model, 'P1', Inf, SchedStrategy.INF);\n# MATLAB: T1 = Task(model, 'T1', 1, SchedStrategy.REF).on(P1);\n# MATLAB: E1 = Entry(model, 'E1').on(T1);\nP1 = Processor(model, 'P1', float('inf'), SchedStrategy.INF)\nT1 = Task(model, 'T1', 1, SchedStrategy.REF).on(P1)\nE1 = Entry(model, 'E1').on(T1)\n\n# MATLAB: P2 = Processor(model, 'P2', Inf, SchedStrategy.INF);\n# MATLAB: T2 = Task(model, 'T2', Inf, SchedStrategy.INF).on(P2);\n# MATLAB: E2 = Entry(model, 'E2').on(T2);\nP2 = Processor(model, 'P2', float('inf'), SchedStrategy.INF)\nT2 = Task(model, 'T2', float('inf'), SchedStrategy.INF).on(P2)\nE2 = Entry(model, 'E2').on(T2)\n\n# definition of activities\n# MATLAB: T1.set_think_time(Erlang.fit_mean_and_order(0.0001,2));\nT1.set_think_time(Erlang.fit_mean_and_order(0.0001, 2))\n\n# MATLAB: A1 = Activity(model, 'A1', Exp(1.0)).on(T1).boundTo(E1).synchCall(E2,3);\n# MATLAB: A2 = Activity(model, 'A2', APH.fit_mean_and_scv(1,10)).on(T2).boundTo(E2).repliesTo(E2);\nA1 = Activity(model, 'A1', Exp(1.0)).on(T1).bound_to(E1).synch_call(E2, 3)\nA2 = Activity(model, 'A2', APH.fit_mean_and_scv(1, 10)).on(T2).bound_to(E2).replies_to(E2)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:19:48.860500Z",
          "start_time": "2025-07-30T22:19:48.807701Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:33:07.332387Z",
          "iopub.execute_input": "2026-01-03T15:33:07.332603Z",
          "shell.execute_reply": "2026-01-03T15:33:07.335571Z",
          "iopub.status.idle": "2026-01-03T15:33:07.335899Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# instantiate solvers\n# MATLAB: options = LQNS.defaultOptions;\n# MATLAB: options.keep = true;\n# MATLAB: options.verbose = 1;\n# MATLAB: %options.method = 'lqsim';\n# MATLAB: %options.samples = 1e4;\n# MATLAB: lqnssolver = LQNS(model, options);\n# MATLAB: AvgTableLQNS = lqnssolver.get_avg_table;\n# MATLAB: AvgTableLQNS\nif LQNS.isAvailable():\n    options = LQNS.default_options()\n    options.keep = True\n    options.verbose = 1\n    # options.method = 'lqsim'\n    # options.samples = int(1e4)\n    lqnssolver = LQNS(model, options)\n    AvgTableLQNS = lqnssolver.avg_table()\n    print('AvgTableLQNS:')\n    print(AvgTableLQNS)\nelse:\n    print(\"LQNS solver not available - skipping\")\n\n# this method runs the MVA solver in each layer\n# MATLAB: lnoptions = LN.defaultOptions;\n# MATLAB: lnoptions.verbose = 0;\n# MATLAB: lnoptions.seed = 2300;  \n# MATLAB: options = MVA.defaultOptions;\n# MATLAB: options.verbose = 0;\n# MATLAB: solver{1} = LN(model, @(model) MVA(model, options), lnoptions);\n# MATLAB: AvgTable{1} = solver{1}.get_avg_table\n# MATLAB: AvgTable{1}\nsolver = {}\nAvgTable = {}\n\nlnoptions = LN.default_options()\nlnoptions.verbose = 0\nlnoptions.seed = 2300\noptions = MVA.default_options()\noptions.verbose = 0\nsolver[1] = LN(model, lambda model_arg: MVA(model_arg, options), lnoptions)\nAvgTable[1] = solver[1].avg_table()\nprint('AvgTable[1]:')\nprint(AvgTable[1])\n\n# this method runs the NC solver in each layer\n# MATLAB: lnoptions = LN.defaultOptions;\n# MATLAB: lnoptions.verbose = 0;\n# MATLAB: lnoptions.seed = 2300;\n# MATLAB: options = NC.defaultOptions;\n# MATLAB: options.verbose = 0;\n# MATLAB: solver{2} = LN(model, @(model) NC(model, options), lnoptions);\n# MATLAB: AvgTable{2} = solver{2}.get_avg_table\n# MATLAB: AvgTable{2}\nlnoptions = LN.default_options()\nlnoptions.verbose = 0\nlnoptions.seed = 2300\noptions = NC.default_options()\noptions.verbose = 0\nsolver[2] = LN(model, lambda model_arg: NC(model_arg, options), lnoptions)\nAvgTable[2] = solver[2].avg_table()\nprint('AvgTable[2]:')\nprint(AvgTable[2])\n\n# this method adapts with the features of each layer\n# MATLAB: %solver{2} = LN(model, @(model) LINE(model, LINE.defaultOptions), lnoptions);\n# MATLAB: %AvgTable{2} = solver{2}.get_avg_table\n# MATLAB: %AvgTable{2}\n# solver[3] = LN(model, lambda model_arg: LINE(model_arg, LINE.default_options()), lnoptions)\n# AvgTable[3] = solver[3].avg_table()\n# print('AvgTable[3]:')\n# print(AvgTable[3])",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:19:49.113660Z",
          "start_time": "2025-07-30T22:19:48.877042Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:33:07.336878Z",
          "iopub.execute_input": "2026-01-03T15:33:07.336978Z",
          "shell.execute_reply": "2026-01-03T15:33:07.375574Z",
          "iopub.status.idle": "2026-01-03T15:33:07.376078Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "LQNS command: lqns -Pmultiserver=rolia -Pstop-on-message-loss=false -x /tmp/lqns_r0z5rn89/model.lqnx\nNode  QLen  Util  RespT  Tput\n  P1  0.00  0.25    0.0  0.00\n  T1  1.00  0.25    0.0  0.25\n  E1  1.00  0.25    4.0  0.25\n  A1  1.00  0.25    4.0  0.25\n  P2  0.00  0.75    0.0  0.00\n  T2  0.75  0.75    0.0  0.75\n  E2  0.75  0.75    1.0  0.75\n  A2  0.75  0.75    1.0  0.75\nAvgTableLQNS:\n  Node  QLen  Util  RespT  Tput\n0   P1  0.00  0.25    0.0  0.00\n1   T1  1.00  0.25    0.0  0.25\n2   E1  1.00  0.25    4.0  0.25\n3   A1  1.00  0.25    4.0  0.25\n4   P2  0.00  0.75    0.0  0.00\n5   T2  0.75  0.75    0.0  0.75\n6   E2  0.75  0.75    1.0  0.75\n7   A2  0.75  0.75    1.0  0.75\nNode  NodeType   QLen       Util     RespT    ResidT       ArvR       Tput\n  P1 Processor 0.5236 5.2356e-07 1000000.0 1000000.0 5.2356e-07 5.2356e-07\n  P2 Processor 1.0000 1.0000e-06 1000000.0 1000000.0 1.0000e-06 1.0000e-06\n  T2      Task 0.5236 5.2356e-07 1000000.0 1000000.0 5.2356e-07 5.2356e-07\n  E1     Entry 0.5236 5.2356e-07 1000000.0 1000000.0 5.2356e-07 5.2356e-07\n  E2     Entry 1.0000 1.0000e-06 1000000.0 1000000.0 1.0000e-06 1.0000e-06\nAvgTable[1]:\n  Node   NodeType    QLen        Util      RespT     ResidT        ArvR  \\\n0   P1  Processor  0.5236  5.2356e-07  1000000.0  1000000.0  5.2356e-07   \n1   P2  Processor  1.0000  1.0000e-06  1000000.0  1000000.0  1.0000e-06   \n2   T2       Task  0.5236  5.2356e-07  1000000.0  1000000.0  5.2356e-07   \n3   E1      Entry  0.5236  5.2356e-07  1000000.0  1000000.0  5.2356e-07   \n4   E2      Entry  1.0000  1.0000e-06  1000000.0  1000000.0  1.0000e-06   \n\n         Tput  \n0  5.2356e-07  \n1  1.0000e-06  \n2  5.2356e-07  \n3  5.2356e-07  \n4  1.0000e-06  \nNode  NodeType   QLen       Util     RespT    ResidT       ArvR       Tput\n  P1 Processor 0.5236 5.2356e-07 1000000.0 1000000.0 5.2356e-07 5.2356e-07\n  P2 Processor 1.0000 1.0000e-06 1000000.0 1000000.0 1.0000e-06 1.0000e-06\n  T2      Task 0.5236 5.2356e-07 1000000.0 1000000.0 5.2356e-07 5.2356e-07\n  E1     Entry 0.5236 5.2356e-07 1000000.0 1000000.0 5.2356e-07 5.2356e-07\n  E2     Entry 1.0000 1.0000e-06 1000000.0 1000000.0 1.0000e-06 1.0000e-06\nAvgTable[2]:\n  Node   NodeType    QLen        Util      RespT     ResidT        ArvR  \\\n0   P1  Processor  0.5236  5.2356e-07  1000000.0  1000000.0  5.2356e-07   \n1   P2  Processor  1.0000  1.0000e-06  1000000.0  1000000.0  1.0000e-06   \n2   T2       Task  0.5236  5.2356e-07  1000000.0  1000000.0  5.2356e-07   \n3   E1      Entry  0.5236  5.2356e-07  1000000.0  1000000.0  5.2356e-07   \n4   E2      Entry  1.0000  1.0000e-06  1000000.0  1000000.0  1.0000e-06   \n\n         Tput  \n0  5.2356e-07  \n1  1.0000e-06  \n2  5.2356e-07  \n3  5.2356e-07  \n4  1.0000e-06  \n",
            "numerical_values": [
              0.0,
              5.0,
              89.0,
              1.0,
              0.0,
              0.25,
              0.0,
              0.0,
              1.0,
              1.0,
              0.25,
              0.0,
              0.25,
              1.0,
              1.0,
              0.25,
              4.0,
              0.25,
              1.0,
              1.0,
              0.25,
              4.0,
              0.25,
              2.0,
              0.0,
              0.75,
              0.0,
              0.0,
              2.0,
              0.75,
              0.75,
              0.0,
              0.75,
              2.0,
              0.75,
              0.75,
              1.0,
              0.75,
              2.0,
              0.75,
              0.75,
              1.0,
              0.75,
              0.0,
              1.0,
              0.0,
              0.25,
              0.0,
              0.0,
              1.0,
              1.0,
              1.0,
              0.25,
              0.0,
              0.25,
              2.0,
              1.0,
              1.0,
              0.25,
              4.0,
              0.25,
              3.0,
              1.0,
              1.0,
              0.25,
              4.0,
              0.25,
              4.0,
              2.0,
              0.0,
              0.75,
              0.0,
              0.0,
              5.0,
              2.0,
              0.75,
              0.75,
              0.0,
              0.75,
              6.0,
              2.0,
              0.75,
              0.75,
              1.0,
              0.75,
              7.0,
              2.0,
              0.75,
              0.75,
              1.0,
              0.75,
              1.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              5.2356e-07,
              2.0,
              1.0,
              1e-06,
              1000000.0,
              1000000.0,
              1e-06,
              1e-06,
              2.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              5.2356e-07,
              1.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              5.2356e-07,
              2.0,
              1.0,
              1e-06,
              1000000.0,
              1000000.0,
              1e-06,
              1e-06,
              1.0,
              0.0,
              1.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              1.0,
              2.0,
              1.0,
              1e-06,
              1000000.0,
              1000000.0,
              1e-06,
              2.0,
              2.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              3.0,
              1.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              4.0,
              2.0,
              1.0,
              1e-06,
              1000000.0,
              1000000.0,
              1e-06,
              0.0,
              5.2356e-07,
              1.0,
              1e-06,
              2.0,
              5.2356e-07,
              3.0,
              5.2356e-07,
              4.0,
              1e-06,
              1.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              5.2356e-07,
              2.0,
              1.0,
              1e-06,
              1000000.0,
              1000000.0,
              1e-06,
              1e-06,
              2.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              5.2356e-07,
              1.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              5.2356e-07,
              2.0,
              1.0,
              1e-06,
              1000000.0,
              1000000.0,
              1e-06,
              1e-06,
              2.0,
              0.0,
              1.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              1.0,
              2.0,
              1.0,
              1e-06,
              1000000.0,
              1000000.0,
              1e-06,
              2.0,
              2.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              3.0,
              1.0,
              0.5236,
              5.2356e-07,
              1000000.0,
              1000000.0,
              5.2356e-07,
              4.0,
              2.0,
              1.0,
              1e-06,
              1000000.0,
              1000000.0,
              1e-06,
              0.0,
              5.2356e-07,
              1.0,
              1e-06,
              2.0,
              5.2356e-07,
              3.0,
              5.2356e-07,
              4.0,
              1e-06
            ]
          }
        }
      ],
      "execution_count": 3
    }
  },
  "numerical_summary": {
    "cell_2": [
      0.0,
      5.0,
      89.0,
      1.0,
      0.0,
      0.25,
      0.0,
      0.0,
      1.0,
      1.0,
      0.25,
      0.0,
      0.25,
      1.0,
      1.0,
      0.25,
      4.0,
      0.25,
      1.0,
      1.0,
      0.25,
      4.0,
      0.25,
      2.0,
      0.0,
      0.75,
      0.0,
      0.0,
      2.0,
      0.75,
      0.75,
      0.0,
      0.75,
      2.0,
      0.75,
      0.75,
      1.0,
      0.75,
      2.0,
      0.75,
      0.75,
      1.0,
      0.75,
      0.0,
      1.0,
      0.0,
      0.25,
      0.0,
      0.0,
      1.0,
      1.0,
      1.0,
      0.25,
      0.0,
      0.25,
      2.0,
      1.0,
      1.0,
      0.25,
      4.0,
      0.25,
      3.0,
      1.0,
      1.0,
      0.25,
      4.0,
      0.25,
      4.0,
      2.0,
      0.0,
      0.75,
      0.0,
      0.0,
      5.0,
      2.0,
      0.75,
      0.75,
      0.0,
      0.75,
      6.0,
      2.0,
      0.75,
      0.75,
      1.0,
      0.75,
      7.0,
      2.0,
      0.75,
      0.75,
      1.0,
      0.75,
      1.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      5.2356e-07,
      2.0,
      1.0,
      1e-06,
      1000000.0,
      1000000.0,
      1e-06,
      1e-06,
      2.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      5.2356e-07,
      1.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      5.2356e-07,
      2.0,
      1.0,
      1e-06,
      1000000.0,
      1000000.0,
      1e-06,
      1e-06,
      1.0,
      0.0,
      1.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      1.0,
      2.0,
      1.0,
      1e-06,
      1000000.0,
      1000000.0,
      1e-06,
      2.0,
      2.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      3.0,
      1.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      4.0,
      2.0,
      1.0,
      1e-06,
      1000000.0,
      1000000.0,
      1e-06,
      0.0,
      5.2356e-07,
      1.0,
      1e-06,
      2.0,
      5.2356e-07,
      3.0,
      5.2356e-07,
      4.0,
      1e-06,
      1.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      5.2356e-07,
      2.0,
      1.0,
      1e-06,
      1000000.0,
      1000000.0,
      1e-06,
      1e-06,
      2.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      5.2356e-07,
      1.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      5.2356e-07,
      2.0,
      1.0,
      1e-06,
      1000000.0,
      1000000.0,
      1e-06,
      1e-06,
      2.0,
      0.0,
      1.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      1.0,
      2.0,
      1.0,
      1e-06,
      1000000.0,
      1000000.0,
      1e-06,
      2.0,
      2.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      3.0,
      1.0,
      0.5236,
      5.2356e-07,
      1000000.0,
      1000000.0,
      5.2356e-07,
      4.0,
      2.0,
      1.0,
      1e-06,
      1000000.0,
      1000000.0,
      1e-06,
      0.0,
      5.2356e-07,
      1.0,
      1e-06,
      2.0,
      5.2356e-07,
      3.0,
      5.2356e-07,
      4.0,
      1e-06
    ]
  },
  "metadata": {
    "notebook_path": "layeredModel/lqn_multi_solvers.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 3,
    "code_cells": 3,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}