{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport os\n\nGlobalConstants.set_verbose(VerboseLevel.SILENT)\n\nprint('This example illustrates the initialization of LN using the output of LQNS.')\n\n# Load model from XML file (in same directory as notebook)\nmodel = LayeredNetwork.parse_xml('lqn_serial.xml')",
      "metadata": {
        "execution": {
          "iopub.status.busy": "2026-01-03T15:33:04.844342Z",
          "iopub.execute_input": "2026-01-03T15:33:04.844441Z",
          "shell.execute_reply": "2026-01-03T15:33:05.545327Z",
          "iopub.status.idle": "2026-01-03T15:33:05.545724Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "This example illustrates the initialization of LN using the output of LQNS.\n"
          }
        }
      ],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "# Set options for LQNS solver\noptions = LQNS.default_options()\noptions.keep = True  # Keep intermediate XML files\n\n# Solve the model using LQNS if available\nif LQNS.isAvailable():\n    lqns_solver = LQNS(model, options)\n    try:\n        avg_table_lqns = lqns_solver.avg_table()\n        print('LQNS Solver Results:')\n        print(avg_table_lqns)\n    except Exception as e:\n        print(f'LQNS solver error: {e}')\nelse:\n    print('LQNS solver not available - skipping')",
      "metadata": {
        "execution": {
          "iopub.status.busy": "2026-01-03T15:33:05.546990Z",
          "iopub.execute_input": "2026-01-03T15:33:05.547194Z",
          "shell.execute_reply": "2026-01-03T15:33:05.569384Z",
          "iopub.status.idle": "2026-01-03T15:33:05.569851Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "Node   QLen   Util   RespT   Tput\n  P1 0.0000 0.1421  0.0000 0.0000\n  T1 1.1215 0.1421  0.0000 0.0888\n  E1 1.1215 0.1421 12.6310 0.0888\n AS1 0.1627 0.1421  1.8327 0.0888\n AS2 0.9587 0.0000 10.7983 0.0888\n  P2 0.0000 0.5327  0.0000 0.0000\n  T2 0.5327 0.5327  0.0000 0.0888\n  E2 0.5327 0.5327  6.0000 0.0888\n AS3 0.4439 0.4439  5.0000 0.0888\n AS4 0.0888 0.0888  1.0000 0.0888\nLQNS Solver Results:\n  Node    QLen    Util    RespT    Tput\n0   P1  0.0000  0.1421   0.0000  0.0000\n1   T1  1.1215  0.1421   0.0000  0.0888\n2   E1  1.1215  0.1421  12.6310  0.0888\n3  AS1  0.1627  0.1421   1.8327  0.0888\n4  AS2  0.9587  0.0000  10.7983  0.0888\n5   P2  0.0000  0.5327   0.0000  0.0000\n6   T2  0.5327  0.5327   0.0000  0.0888\n7   E2  0.5327  0.5327   6.0000  0.0888\n8  AS3  0.4439  0.4439   5.0000  0.0888\n9  AS4  0.0888  0.0888   1.0000  0.0888\n",
            "numerical_values": [
              1.0,
              0.0,
              0.1421,
              0.0,
              0.0,
              1.0,
              1.1215,
              0.1421,
              0.0,
              0.0888,
              1.0,
              1.1215,
              0.1421,
              12.631,
              0.0888,
              1.0,
              0.1627,
              0.1421,
              1.8327,
              0.0888,
              2.0,
              0.9587,
              0.0,
              10.7983,
              0.0888,
              2.0,
              0.0,
              0.5327,
              0.0,
              0.0,
              2.0,
              0.5327,
              0.5327,
              0.0,
              0.0888,
              2.0,
              0.5327,
              0.5327,
              6.0,
              0.0888,
              3.0,
              0.4439,
              0.4439,
              5.0,
              0.0888,
              4.0,
              0.0888,
              0.0888,
              1.0,
              0.0888,
              0.0,
              1.0,
              0.0,
              0.1421,
              0.0,
              0.0,
              1.0,
              1.0,
              1.1215,
              0.1421,
              0.0,
              0.0888,
              2.0,
              1.0,
              1.1215,
              0.1421,
              12.631,
              0.0888,
              3.0,
              1.0,
              0.1627,
              0.1421,
              1.8327,
              0.0888,
              4.0,
              2.0,
              0.9587,
              0.0,
              10.7983,
              0.0888,
              5.0,
              2.0,
              0.0,
              0.5327,
              0.0,
              0.0,
              6.0,
              2.0,
              0.5327,
              0.5327,
              0.0,
              0.0888,
              7.0,
              2.0,
              0.5327,
              0.5327,
              6.0,
              0.0888,
              8.0,
              3.0,
              0.4439,
              0.4439,
              5.0,
              0.0888,
              9.0,
              4.0,
              0.0888,
              0.0888,
              1.0,
              0.0888
            ]
          }
        }
      ],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Solve with LN without initialization\nprint('\\nSolve with LN without initialization:')\nln_solver = LN(model, lambda x: MVA(x))\nimport time\nstart_time = time.time()\ntry:\n    avg_table = ln_solver.avg_table()\n    end_time = time.time()\n    time_elapsed = end_time - start_time\n    \n    print('AvgTable:')\n    print(avg_table)\n    print(f'Time elapsed: {time_elapsed:.3f}s')\nexcept Exception as e:\n    print(f'LN solver error: {e}')",
      "metadata": {
        "execution": {
          "iopub.status.busy": "2026-01-03T15:33:05.570842Z",
          "iopub.execute_input": "2026-01-03T15:33:05.570954Z",
          "shell.execute_reply": "2026-01-03T15:33:05.577833Z",
          "iopub.status.idle": "2026-01-03T15:33:05.578179Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "\nSolve with LN without initialization:\nNode  NodeType   QLen   Util   RespT  ResidT   ArvR   Tput\n  P1 Processor 0.1645 0.1435  1.8331  1.8331 0.0897 0.0897\n  P2 Processor 1.0000 1.0000  5.0000  5.0000 0.2000 0.2000\n  T2      Task 0.8637 0.5000 10.3645 10.3645 0.0833 0.0833\n  E1     Entry 0.1645 0.1435  1.8331  1.8331 0.0897 0.0897\n  E2     Entry 1.0000 1.0000  5.0000  5.0000 0.2000 0.2000\nAvgTable:\n  Node   NodeType    QLen    Util    RespT   ResidT    ArvR    Tput\n0   P1  Processor  0.1645  0.1435   1.8331   1.8331  0.0897  0.0897\n1   P2  Processor  1.0000  1.0000   5.0000   5.0000  0.2000  0.2000\n2   T2       Task  0.8637  0.5000  10.3645  10.3645  0.0833  0.0833\n3   E1      Entry  0.1645  0.1435   1.8331   1.8331  0.0897  0.0897\n4   E2      Entry  1.0000  1.0000   5.0000   5.0000  0.2000  0.2000\nTime elapsed: 0.004s\n",
            "numerical_values": [
              1.0,
              0.1645,
              0.1435,
              1.8331,
              1.8331,
              0.0897,
              0.0897,
              2.0,
              1.0,
              1.0,
              5.0,
              5.0,
              0.2,
              0.2,
              2.0,
              0.8637,
              0.5,
              10.3645,
              10.3645,
              0.0833,
              0.0833,
              1.0,
              0.1645,
              0.1435,
              1.8331,
              1.8331,
              0.0897,
              0.0897,
              2.0,
              1.0,
              1.0,
              5.0,
              5.0,
              0.2,
              0.2,
              0.0,
              1.0,
              0.1645,
              0.1435,
              1.8331,
              1.8331,
              0.0897,
              0.0897,
              1.0,
              2.0,
              1.0,
              1.0,
              5.0,
              5.0,
              0.2,
              0.2,
              2.0,
              2.0,
              0.8637,
              0.5,
              10.3645,
              10.3645,
              0.0833,
              0.0833,
              3.0,
              1.0,
              0.1645,
              0.1435,
              1.8331,
              1.8331,
              0.0897,
              0.0897,
              4.0,
              2.0,
              1.0,
              1.0,
              5.0,
              5.0,
              0.2,
              0.2,
              0.004
            ]
          }
        }
      ],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# Obtain the CDF of response times\nprint('\\nWe now obtain the CDF of response times:')\ntry:\n    ensemble = model.ensemble\n    if ensemble is not None and len(ensemble) >= 3:\n        fluid_solver = FLD(ensemble[2])  # ensemble[2] in Python (0-indexed)\n        rd = fluid_solver.cdf_resp_t()\n        print('RD (CDF of response times):')\n        print(rd)\n    else:\n        print('Model ensemble not available or insufficient layers')\nexcept Exception as e:\n    print(f'CDF computation not available: {e}')\n    print('Fluid solver and ensemble access not yet fully implemented')",
      "metadata": {
        "execution": {
          "iopub.status.busy": "2026-01-03T15:33:05.579052Z",
          "iopub.execute_input": "2026-01-03T15:33:05.579147Z",
          "shell.execute_reply": "2026-01-03T15:33:05.581098Z",
          "iopub.status.idle": "2026-01-03T15:33:05.581440Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "\nWe now obtain the CDF of response times:\nCDF computation not available: 'LayeredNetwork' object has no attribute 'ensemble'\nFluid solver and ensemble access not yet fully implemented\n"
          }
        }
      ],
      "execution_count": 4
    }
  },
  "numerical_summary": {
    "cell_1": [
      1.0,
      0.0,
      0.1421,
      0.0,
      0.0,
      1.0,
      1.1215,
      0.1421,
      0.0,
      0.0888,
      1.0,
      1.1215,
      0.1421,
      12.631,
      0.0888,
      1.0,
      0.1627,
      0.1421,
      1.8327,
      0.0888,
      2.0,
      0.9587,
      0.0,
      10.7983,
      0.0888,
      2.0,
      0.0,
      0.5327,
      0.0,
      0.0,
      2.0,
      0.5327,
      0.5327,
      0.0,
      0.0888,
      2.0,
      0.5327,
      0.5327,
      6.0,
      0.0888,
      3.0,
      0.4439,
      0.4439,
      5.0,
      0.0888,
      4.0,
      0.0888,
      0.0888,
      1.0,
      0.0888,
      0.0,
      1.0,
      0.0,
      0.1421,
      0.0,
      0.0,
      1.0,
      1.0,
      1.1215,
      0.1421,
      0.0,
      0.0888,
      2.0,
      1.0,
      1.1215,
      0.1421,
      12.631,
      0.0888,
      3.0,
      1.0,
      0.1627,
      0.1421,
      1.8327,
      0.0888,
      4.0,
      2.0,
      0.9587,
      0.0,
      10.7983,
      0.0888,
      5.0,
      2.0,
      0.0,
      0.5327,
      0.0,
      0.0,
      6.0,
      2.0,
      0.5327,
      0.5327,
      0.0,
      0.0888,
      7.0,
      2.0,
      0.5327,
      0.5327,
      6.0,
      0.0888,
      8.0,
      3.0,
      0.4439,
      0.4439,
      5.0,
      0.0888,
      9.0,
      4.0,
      0.0888,
      0.0888,
      1.0,
      0.0888
    ],
    "cell_2": [
      1.0,
      0.1645,
      0.1435,
      1.8331,
      1.8331,
      0.0897,
      0.0897,
      2.0,
      1.0,
      1.0,
      5.0,
      5.0,
      0.2,
      0.2,
      2.0,
      0.8637,
      0.5,
      10.3645,
      10.3645,
      0.0833,
      0.0833,
      1.0,
      0.1645,
      0.1435,
      1.8331,
      1.8331,
      0.0897,
      0.0897,
      2.0,
      1.0,
      1.0,
      5.0,
      5.0,
      0.2,
      0.2,
      0.0,
      1.0,
      0.1645,
      0.1435,
      1.8331,
      1.8331,
      0.0897,
      0.0897,
      1.0,
      2.0,
      1.0,
      1.0,
      5.0,
      5.0,
      0.2,
      0.2,
      2.0,
      2.0,
      0.8637,
      0.5,
      10.3645,
      10.3645,
      0.0833,
      0.0833,
      3.0,
      1.0,
      0.1645,
      0.1435,
      1.8331,
      1.8331,
      0.0897,
      0.0897,
      4.0,
      2.0,
      1.0,
      1.0,
      5.0,
      5.0,
      0.2,
      0.2,
      0.004,
      0.3
    ],
    "cell_3": [
      3.0,
      2.0,
      2.0,
      0.0
    ]
  },
  "metadata": {
    "notebook_path": "layeredModel/lqn_init.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 4,
    "code_cells": 4,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}