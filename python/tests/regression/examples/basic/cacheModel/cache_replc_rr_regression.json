{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\n\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:08:29.992449Z",
          "start_time": "2025-07-30T22:08:29.003009Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:23.495208Z",
          "iopub.execute_input": "2026-01-03T15:31:23.495431Z",
          "shell.execute_reply": "2026-01-03T15:31:24.192606Z",
          "iopub.status.idle": "2026-01-03T15:31:24.193234Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "model = Network('model')\n\nn = 5  # number of items\nm = 2  # cache capacity\n\nsource = Source(model, 'Source')\ncacheNode = Cache(model, 'Cache', n, m, ReplacementStrategy.RR)\nsink = Sink(model, 'Sink')\n\njobClass = OpenClass(model, 'InitClass', 0)\nhitClass = OpenClass(model, 'HitClass', 0)\nmissClass = OpenClass(model, 'MissClass', 0)\n\nsource.set_arrival(jobClass, Exp(2))\n\n#pAccess = DiscreteSampler((1/n)*ones(1,n))  # uniform item references\npAccess = Zipf(1.4, n)  # Zipf-like item references\ncacheNode.set_read(jobClass, pAccess)\n\ncacheNode.set_hit_class(jobClass, hitClass)\ncacheNode.set_miss_class(jobClass, missClass)\n\nP = model.init_routing_matrix()\nP.set(jobClass, jobClass, source, cacheNode, 1.0)\nP.set(hitClass, hitClass, cacheNode, sink, 1.0)\nP.set(missClass, missClass, cacheNode, sink, 1.0)\n\nmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:08:30.130466Z",
          "start_time": "2025-07-30T22:08:30.042688Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:24.194612Z",
          "iopub.execute_input": "2026-01-03T15:31:24.194839Z",
          "iopub.status.idle": "2026-01-03T15:31:24.198579Z",
          "shell.execute_reply": "2026-01-03T15:31:24.198014Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "solver = np.empty(4, dtype=object)\nAvgTable = np.empty(4, dtype=object)\n\nsolver[0] = CTMC(model, keep=False, cutoff=1, seed=1)\nAvgTable[0] = solver[0].avg_node_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:08:30.371031Z",
          "start_time": "2025-07-30T22:08:30.140497Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:24.200318Z",
          "iopub.execute_input": "2026-01-03T15:31:24.200484Z",
          "shell.execute_reply": "2026-01-03T15:31:24.210463Z",
          "iopub.status.idle": "2026-01-03T15:31:24.211001Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "CTMC solver using state space cutoff = 1 for open/mixed model.\nStation  JobClass  QLen  Util  RespT  ResidT  ArvR  Tput\n Source InitClass   0.0   0.0    0.0     0.0   2.0   2.0\n Source  HitClass   0.0   0.0    0.0     0.0   1.0   1.0\n Source MissClass   0.0   0.0    0.0     0.0   1.0   1.0\n",
            "numerical_values": [
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              2.0,
              2.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.0,
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.0,
              1.0
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stderr",
            "text": "/home/gcasale/Dropbox/code/line-dev.git/python/line_solver/api/solvers/ctmc/handler.py:834: UserWarning: State space truncation may cause inaccurate results. Consider varying cutoff to assess sensitivity.\n  warnings.warn(\n",
            "numerical_values": [
              834.0
            ]
          }
        }
      ],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "model.reset()\nsolver[1] = SSA(model, samples=10000, verbose=True, method=\"serial\", seed=1)\nAvgTable[1] = solver[1].avg_node_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:08:31.207482Z",
          "start_time": "2025-07-30T22:08:30.380892Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:24.212629Z",
          "iopub.execute_input": "2026-01-03T15:31:24.212768Z",
          "shell.execute_reply": "2026-01-03T15:31:24.217741Z",
          "iopub.status.idle": "2026-01-03T15:31:24.218326Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "SSA: No enabled transitions at sample 0\nStation  JobClass  QLen  Util  RespT  ResidT  ArvR  Tput\n Source InitClass   0.0   0.0    0.0     0.0   0.0   2.0\n Source  HitClass   0.0   0.0    0.0     0.0   0.0   1.0\n Source MissClass   0.0   0.0    0.0     0.0   0.0   1.0\n",
            "numerical_values": [
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              2.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.0
            ]
          }
        }
      ],
      "execution_count": 4
    },
    "cell_4": {
      "cell_type": "code",
      "source": "model.reset()\nsolver[2] = MVA(model, seed=1)\nAvgTable[2] = solver[2].avg_node_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:08:31.233942Z",
          "start_time": "2025-07-30T22:08:31.217889Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:24.219814Z",
          "iopub.execute_input": "2026-01-03T15:31:24.219952Z",
          "shell.execute_reply": "2026-01-03T15:31:24.226037Z",
          "iopub.status.idle": "2026-01-03T15:31:24.226472Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "Station  JobClass  QLen  Util  RespT  ResidT  ArvR  Tput\n Source InitClass   0.0   0.0    0.0     0.0   2.0   2.0\n Source  HitClass   0.0   0.0    0.0     0.0   1.0   1.0\n Source MissClass   0.0   0.0    0.0     0.0   1.0   1.0\n",
            "numerical_values": [
              0.0,
              0.0,
              0.0,
              0.0,
              2.0,
              2.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.0,
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.0,
              1.0
            ]
          }
        }
      ],
      "execution_count": 5
    },
    "cell_5": {
      "cell_type": "code",
      "source": "model.reset()\nsolver[3] = NC(model, seed=1)\nAvgTable[3] = solver[3].avg_node_table()\n\nhitRatio = cacheNode.hit_ratio()\nmissRatio = cacheNode.miss_ratio()\nprint(f\"hitRatio = {hitRatio}\")\nprint(f\"missRatio = {missRatio}\")",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:08:31.326898Z",
          "start_time": "2025-07-30T22:08:31.279723Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:31:24.228007Z",
          "iopub.execute_input": "2026-01-03T15:31:24.228149Z",
          "shell.execute_reply": "2026-01-03T15:31:24.234612Z",
          "iopub.status.idle": "2026-01-03T15:31:24.235012Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "Station  JobClass  QLen  Util  RespT  ResidT  ArvR  Tput\n Source InitClass   0.0   0.0    0.0     0.0   2.0   2.0\n Source  HitClass   0.0   0.0    0.0     0.0   1.0   1.0\n Source MissClass   0.0   0.0    0.0     0.0   1.0   1.0\nhitRatio = None\nmissRatio = None\n",
            "numerical_values": [
              0.0,
              0.0,
              0.0,
              0.0,
              2.0,
              2.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.0,
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.0,
              1.0
            ]
          }
        }
      ],
      "execution_count": 6
    }
  },
  "numerical_summary": {
    "cell_2": [
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      2.0,
      2.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.0,
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.0,
      1.0,
      834.0,
      4.0,
      4.0,
      0.0,
      1.0,
      1.0,
      0.0,
      0.0
    ],
    "cell_3": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      2.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.0,
      1.0,
      10000.0,
      1.0,
      1.0,
      1.0
    ],
    "cell_4": [
      0.0,
      0.0,
      0.0,
      0.0,
      2.0,
      2.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.0,
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.0,
      1.0,
      2.0,
      1.0,
      2.0,
      2.0
    ],
    "cell_5": [
      0.0,
      0.0,
      0.0,
      0.0,
      2.0,
      2.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.0,
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.0,
      1.0,
      3.0,
      1.0,
      3.0,
      3.0
    ]
  },
  "metadata": {
    "notebook_path": "cacheModel/cache_replc_rr.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 6,
    "code_cells": 6,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}