{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:12.900201Z",
          "start_time": "2025-07-30T22:17:11.866604Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:33.523354Z",
          "iopub.execute_input": "2026-01-03T15:32:33.523448Z",
          "shell.execute_reply": "2026-01-03T15:32:34.168852Z",
          "iopub.status.idle": "2026-01-03T15:32:34.169332Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "# Fork-Join with Class Switching\nmodel = Network('model')",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:12.962640Z",
          "start_time": "2025-07-30T22:17:12.958915Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:34.170592Z",
          "iopub.execute_input": "2026-01-03T15:32:34.170760Z",
          "shell.execute_reply": "2026-01-03T15:32:34.172075Z",
          "iopub.status.idle": "2026-01-03T15:32:34.172396Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Create network\ndelay = Delay(model, 'Delay1')\ndelay2 = Delay(model, 'Delay2')\nqueue1 = Queue(model,'Queue1',SchedStrategy.PS)\nqueue2 = Queue(model,'Queue2',SchedStrategy.PS)\nfork = Fork(model,'Fork')\njoin = Join(model,'Join', fork)\n\njobclass1 = ClosedClass(model, 'class1', 10, delay, 0)\njobclass2 = ClosedClass(model, 'class2', 10, delay, 0)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:13.024651Z",
          "start_time": "2025-07-30T22:17:13.012164Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:34.173139Z",
          "iopub.execute_input": "2026-01-03T15:32:34.173227Z",
          "shell.execute_reply": "2026-01-03T15:32:34.174890Z",
          "iopub.status.idle": "2026-01-03T15:32:34.175166Z"
        }
      },
      "outputs": [],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# Service configurations\nqueue1.set_service(jobclass1, Exp(1.0))\nqueue2.set_service(jobclass1, Exp(1.0))\ndelay.set_service(jobclass1, Exp(0.5))\ndelay.set_service(jobclass2, Exp(0.5))\ndelay2.set_service(jobclass2, Exp(2.0))",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:13.064684Z",
          "start_time": "2025-07-30T22:17:13.059854Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:34.175893Z",
          "iopub.execute_input": "2026-01-03T15:32:34.175982Z",
          "shell.execute_reply": "2026-01-03T15:32:34.177421Z",
          "iopub.status.idle": "2026-01-03T15:32:34.177809Z"
        }
      },
      "outputs": [],
      "execution_count": 4
    },
    "cell_4": {
      "cell_type": "code",
      "source": "# Set routing matrix with class switching\nP = model.init_routing_matrix()\n\n# Class switching routing: jobclass1 -> jobclass2 -> jobclass1\nP.set(jobclass1, jobclass2, delay, delay2, 1.0)    # Class switch: class1 -> class2 at delay\nP.set(jobclass2, jobclass1, delay2, fork, 1.0)     # Class switch: class2 -> class1 at delay2\n\n# Fork-join routing for class1\nP.set(jobclass1, jobclass1, fork, queue1, 1.0)\nP.set(jobclass1, jobclass1, fork, queue2, 1.0)\nP.set(jobclass1, jobclass1, queue1, join, 1.0)\nP.set(jobclass1, jobclass1, queue2, join, 1.0)\nP.set(jobclass1, jobclass1, join, delay, 1.0)\n\nmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:13.123824Z",
          "start_time": "2025-07-30T22:17:13.109568Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:34.178479Z",
          "iopub.execute_input": "2026-01-03T15:32:34.178567Z",
          "iopub.status.idle": "2026-01-03T15:32:34.180983Z",
          "shell.execute_reply": "2026-01-03T15:32:34.180655Z"
        }
      },
      "outputs": [],
      "execution_count": 5
    },
    "cell_5": {
      "cell_type": "code",
      "source": "# Solve with multiple methods\nsolvers = [JMT(model, seed=23000), MVA(model)]\nfor i, solver in enumerate(solvers):\n    print(f'SOLVER {i+1}: {solver.get_name()}')\n    avgTable = solver.avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:15.100683Z",
          "start_time": "2025-07-30T22:17:13.159882Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:34.181817Z",
          "iopub.execute_input": "2026-01-03T15:32:34.181905Z",
          "shell.execute_reply": "2026-01-03T15:32:36.444958Z",
          "iopub.status.idle": "2026-01-03T15:32:36.445402Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "SOLVER 1: JMT\n",
            "numerical_values": [
              1.0
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "Station JobClass    QLen   Util   RespT  ResidT   ArvR   Tput\n Delay1   class1  1.9639 1.9639  1.9961  1.9961 0.9767 0.9767\n Delay1   class2  0.0000 0.0000  0.0000  0.0000 1.4687 1.4687\n Delay2   class1  0.0000 0.0000  0.0000  0.0000 0.0000 0.0000\n Delay2   class2  0.4939 0.4939  0.5027  0.5027 0.9752 0.9752\n Queue1   class1 12.9303 0.9914 12.0608 12.0608 0.9801 0.9801\n Queue1   class2  0.0000 0.0000  0.0000  0.0000 0.0000 0.0000\n Queue2   class1  9.2124 0.9612 10.2545 10.2545 0.9778 0.9778\n Queue2   class2  0.0000 0.0000  0.0000  0.0000 0.0000 0.0000\n   Join   class1 12.9130 0.9999  6.5244  6.5244 0.9756 0.9756\n   Join   class2  0.0000 0.0000  0.0000  0.0000 0.0000 0.0000\nSOLVER 2: MVA\nStation JobClass   QLen   Util  RespT  ResidT   ArvR   Tput\n Delay1   class1 1.6941 1.6941 2.0000  2.0000 0.8470 0.8470\n Delay1   class2 0.4322 0.4322 0.5000  0.5000 0.8645 0.8645\n Delay2   class1 1.6941 1.6941 2.0000  2.0000 0.8470 0.8470\n Delay2   class2 0.4322 0.4322 0.5000  0.5000 0.8645 0.8645\n Queue1   class1 5.5373 0.8470 6.5373  6.5373 0.8470 0.8470\n Queue1   class2 6.3785 0.8645 7.3785  7.3785 0.8645 0.8645\n Queue2   class1 5.5373 0.8470 6.5373  6.5373 0.8470 0.8470\n Queue2   class2 6.3785 0.8645 7.3785  7.3785 0.8645 0.8645\n   Join   class1 5.5373 0.0000 3.2686  3.2686 0.8470 0.8470\n   Join   class2 6.3785 0.0000 3.6893  3.6893 0.8645 0.8645\n",
            "numerical_values": [
              1.0,
              1.0,
              1.9639,
              1.9639,
              1.9961,
              1.9961,
              0.9767,
              0.9767,
              1.0,
              2.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.4687,
              1.4687,
              2.0,
              1.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              2.0,
              2.0,
              0.4939,
              0.4939,
              0.5027,
              0.5027,
              0.9752,
              0.9752,
              1.0,
              1.0,
              12.9303,
              0.9914,
              12.0608,
              12.0608,
              0.9801,
              0.9801,
              1.0,
              2.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              2.0,
              1.0,
              9.2124,
              0.9612,
              10.2545,
              10.2545,
              0.9778,
              0.9778,
              2.0,
              2.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              1.0,
              12.913,
              0.9999,
              6.5244,
              6.5244,
              0.9756,
              0.9756,
              2.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              2.0,
              1.0,
              1.0,
              1.6941,
              1.6941,
              2.0,
              2.0,
              0.847,
              0.847,
              1.0,
              2.0,
              0.4322,
              0.4322,
              0.5,
              0.5,
              0.8645,
              0.8645,
              2.0,
              1.0,
              1.6941,
              1.6941,
              2.0,
              2.0,
              0.847,
              0.847,
              2.0,
              2.0,
              0.4322,
              0.4322,
              0.5,
              0.5,
              0.8645,
              0.8645,
              1.0,
              1.0,
              5.5373,
              0.847,
              6.5373,
              6.5373,
              0.847,
              0.847,
              1.0,
              2.0,
              6.3785,
              0.8645,
              7.3785,
              7.3785,
              0.8645,
              0.8645,
              2.0,
              1.0,
              5.5373,
              0.847,
              6.5373,
              6.5373,
              0.847,
              0.847,
              2.0,
              2.0,
              6.3785,
              0.8645,
              7.3785,
              7.3785,
              0.8645,
              0.8645,
              1.0,
              5.5373,
              0.0,
              3.2686,
              3.2686,
              0.847,
              0.847,
              2.0,
              6.3785,
              0.0,
              3.6893,
              3.6893,
              0.8645,
              0.8645
            ]
          }
        }
      ],
      "execution_count": 6
    }
  },
  "numerical_summary": {
    "cell_5": [
      1.0,
      1.0,
      1.0,
      1.9639,
      1.9639,
      1.9961,
      1.9961,
      0.9767,
      0.9767,
      1.0,
      2.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.4687,
      1.4687,
      2.0,
      1.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      2.0,
      2.0,
      0.4939,
      0.4939,
      0.5027,
      0.5027,
      0.9752,
      0.9752,
      1.0,
      1.0,
      12.9303,
      0.9914,
      12.0608,
      12.0608,
      0.9801,
      0.9801,
      1.0,
      2.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      2.0,
      1.0,
      9.2124,
      0.9612,
      10.2545,
      10.2545,
      0.9778,
      0.9778,
      2.0,
      2.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      1.0,
      12.913,
      0.9999,
      6.5244,
      6.5244,
      0.9756,
      0.9756,
      2.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      2.0,
      1.0,
      1.0,
      1.6941,
      1.6941,
      2.0,
      2.0,
      0.847,
      0.847,
      1.0,
      2.0,
      0.4322,
      0.4322,
      0.5,
      0.5,
      0.8645,
      0.8645,
      2.0,
      1.0,
      1.6941,
      1.6941,
      2.0,
      2.0,
      0.847,
      0.847,
      2.0,
      2.0,
      0.4322,
      0.4322,
      0.5,
      0.5,
      0.8645,
      0.8645,
      1.0,
      1.0,
      5.5373,
      0.847,
      6.5373,
      6.5373,
      0.847,
      0.847,
      1.0,
      2.0,
      6.3785,
      0.8645,
      7.3785,
      7.3785,
      0.8645,
      0.8645,
      2.0,
      1.0,
      5.5373,
      0.847,
      6.5373,
      6.5373,
      0.847,
      0.847,
      2.0,
      2.0,
      6.3785,
      0.8645,
      7.3785,
      7.3785,
      0.8645,
      0.8645,
      1.0,
      5.5373,
      0.0,
      3.2686,
      3.2686,
      0.847,
      0.847,
      2.0,
      6.3785,
      0.0,
      3.6893,
      3.6893,
      0.8645,
      0.8645,
      23000.0,
      1.0
    ]
  },
  "metadata": {
    "notebook_path": "forkJoin/fj_cs_prefork.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 6,
    "code_cells": 6,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}