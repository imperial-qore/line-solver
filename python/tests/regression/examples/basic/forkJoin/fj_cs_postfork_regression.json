{
  "cell_content": {
    "cell_0": {
      "cell_type": "code",
      "source": "from line_solver import *\nimport numpy as np\nGlobalConstants.set_verbose(VerboseLevel.STD)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:02.486344Z",
          "start_time": "2025-07-30T22:17:01.619195Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:29.592662Z",
          "iopub.execute_input": "2026-01-03T15:32:29.592852Z",
          "shell.execute_reply": "2026-01-03T15:32:30.249063Z",
          "iopub.status.idle": "2026-01-03T15:32:30.249734Z"
        }
      },
      "outputs": [],
      "execution_count": 1
    },
    "cell_1": {
      "cell_type": "code",
      "source": "# Fork-Join network example 7\nmodel = Network('model')",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:02.546024Z",
          "start_time": "2025-07-30T22:17:02.542222Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:30.277193Z",
          "iopub.execute_input": "2026-01-03T15:32:30.277515Z",
          "shell.execute_reply": "2026-01-03T15:32:30.278897Z",
          "iopub.status.idle": "2026-01-03T15:32:30.279288Z"
        }
      },
      "outputs": [],
      "execution_count": 2
    },
    "cell_2": {
      "cell_type": "code",
      "source": "# Create network\ndelay = Delay(model,'Delay')\nfork1 = Fork(model,'Fork1')\njoin1 = Join(model,'Join1',fork1)\nqueue1 = Queue(model,'Queue1',SchedStrategy.PS)\nqueue2 = Queue(model,'Queue2',SchedStrategy.PS)\n\njobclass1 = ClosedClass(model, 'class1', 1, delay, 0)\njobclass2 = ClosedClass(model, 'class2', 1, delay, 0)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:02.602332Z",
          "start_time": "2025-07-30T22:17:02.589816Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:30.280374Z",
          "iopub.execute_input": "2026-01-03T15:32:30.280480Z",
          "shell.execute_reply": "2026-01-03T15:32:30.282559Z",
          "iopub.status.idle": "2026-01-03T15:32:30.282962Z"
        }
      },
      "outputs": [],
      "execution_count": 3
    },
    "cell_3": {
      "cell_type": "code",
      "source": "# Service configurations\ndelay.set_service(jobclass1, Exp(0.25))\nqueue1.set_service(jobclass1, Exp(2.0))\nqueue2.set_service(jobclass1, Exp(2.0))\n\ndelay.set_service(jobclass2, Exp(0.25))\nqueue1.set_service(jobclass2, Exp(2.0))\nqueue2.set_service(jobclass2, Exp(2.0))",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:02.654587Z",
          "start_time": "2025-07-30T22:17:02.649651Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:30.284015Z",
          "iopub.execute_input": "2026-01-03T15:32:30.284121Z",
          "shell.execute_reply": "2026-01-03T15:32:30.285996Z",
          "iopub.status.idle": "2026-01-03T15:32:30.286410Z"
        }
      },
      "outputs": [],
      "execution_count": 4
    },
    "cell_4": {
      "cell_type": "code",
      "source": "# Set routing matrix with class switching\nP = model.init_routing_matrix()\n\n# Class 1 routing\nP.set(jobclass1, jobclass1, delay, fork1, 1.0)\nP.set(jobclass1, jobclass1, fork1, queue1, 1.0)\nP.set(jobclass1, jobclass1, fork1, queue2, 1.0)\nP.set(jobclass1, jobclass1, queue1, join1, 1.0)\nP.set(jobclass1, jobclass1, queue2, join1, 1.0)\nP.set(jobclass1, jobclass1, join1, delay, 1.0)\n\n# Class 2 routing (note the class switching from jobclass2 to jobclass1)\nP.set(jobclass2, jobclass2, delay, fork1, 1.0)\nP.set(jobclass2, jobclass1, fork1, queue1, 1.0)\nP.set(jobclass2, jobclass1, fork1, queue2, 1.0)\n\nmodel.link(P)",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:02.720705Z",
          "start_time": "2025-07-30T22:17:02.709360Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:30.287436Z",
          "iopub.execute_input": "2026-01-03T15:32:30.287547Z",
          "iopub.status.idle": "2026-01-03T15:32:30.290913Z",
          "shell.execute_reply": "2026-01-03T15:32:30.290505Z"
        }
      },
      "outputs": [],
      "execution_count": 5
    },
    "cell_5": {
      "cell_type": "code",
      "source": "# Solve with multiple methods\nsolvers = [MVA(model), JMT(model, seed=23000)] # JMT has a bug on this one\nfor i, solver in enumerate(solvers):\n    print(f'SOLVER {i+1}: {solver.get_name()}')\n    avgTable = solver.avg_table()",
      "metadata": {
        "ExecuteTime": {
          "end_time": "2025-07-30T22:17:04.721635Z",
          "start_time": "2025-07-30T22:17:02.760061Z"
        },
        "execution": {
          "iopub.status.busy": "2026-01-03T15:32:30.292181Z",
          "iopub.execute_input": "2026-01-03T15:32:30.292307Z",
          "shell.execute_reply": "2026-01-03T15:32:32.527333Z",
          "iopub.status.idle": "2026-01-03T15:32:32.527933Z"
        }
      },
      "outputs": [
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "SOLVER 1: MVA\nStation JobClass   QLen   Util  RespT  ResidT   ArvR   Tput\n  Delay   class1 0.8270 0.8270 4.0000  4.0000 0.2068 0.2068\n  Join1   class1 0.1153 0.0000 0.2788  0.2788 0.2068 0.2068\n  Join1   class2 0.6667 0.0000 0.4167  0.4167 0.8000 0.8000\n Queue1   class1 0.1153 0.1034 0.5577  0.5577 0.2068 0.2068\n Queue1   class2 0.6667 0.4000 0.8333  0.8333 0.8000 0.8000\n Queue2   class1 0.1153 0.1034 0.5577  0.5577 0.2068 0.2068\n Queue2   class2 0.6667 0.4000 0.8333  0.8333 0.8000 0.8000\nSOLVER 2: JMT\n",
            "numerical_values": [
              1.0,
              1.0,
              0.827,
              0.827,
              4.0,
              4.0,
              0.2068,
              0.2068,
              1.0,
              1.0,
              0.1153,
              0.0,
              0.2788,
              0.2788,
              0.2068,
              0.2068,
              1.0,
              2.0,
              0.6667,
              0.0,
              0.4167,
              0.4167,
              0.8,
              0.8,
              1.0,
              1.0,
              0.1153,
              0.1034,
              0.5577,
              0.5577,
              0.2068,
              0.2068,
              1.0,
              2.0,
              0.6667,
              0.4,
              0.8333,
              0.8333,
              0.8,
              0.8,
              2.0,
              1.0,
              0.1153,
              0.1034,
              0.5577,
              0.5577,
              0.2068,
              0.2068,
              2.0,
              2.0,
              0.6667,
              0.4,
              0.8333,
              0.8333,
              0.8,
              0.8,
              2.0
            ]
          }
        },
        {
          "output_type": "stream",
          "execution_count": null,
          "metadata": {},
          "content": {
            "stream_name": "stdout",
            "text": "Station JobClass   QLen   Util  RespT  ResidT   ArvR   Tput\n  Delay   class1 0.8317 0.8317 3.9359  3.9359 0.2103 0.2103\n  Delay   class2 0.8266 0.8266 3.9266  3.9266 0.2108 0.2108\n  Join1   class1 0.2406 0.2202 0.2850  0.2850 0.2103 0.2103\n  Join1   class2 0.0000 0.0000 0.0000  0.0000 0.2108 0.2108\n Queue1   class1 0.2355 0.2130 0.5454  0.5454 0.4141 0.4141\n Queue1   class2 0.0000 0.0000 0.0000  0.0000 0.0000 0.0000\n Queue2   class1 0.2319 0.2082 0.5466  0.5466 0.4211 0.4211\n Queue2   class2 0.0000 0.0000 0.0000  0.0000 0.0000 0.0000\n",
            "numerical_values": [
              1.0,
              0.8317,
              0.8317,
              3.9359,
              3.9359,
              0.2103,
              0.2103,
              2.0,
              0.8266,
              0.8266,
              3.9266,
              3.9266,
              0.2108,
              0.2108,
              1.0,
              1.0,
              0.2406,
              0.2202,
              0.285,
              0.285,
              0.2103,
              0.2103,
              1.0,
              2.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.2108,
              0.2108,
              1.0,
              1.0,
              0.2355,
              0.213,
              0.5454,
              0.5454,
              0.4141,
              0.4141,
              1.0,
              2.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              2.0,
              1.0,
              0.2319,
              0.2082,
              0.5466,
              0.5466,
              0.4211,
              0.4211,
              2.0,
              2.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0,
              0.0
            ]
          }
        }
      ],
      "execution_count": 6
    }
  },
  "numerical_summary": {
    "cell_1": [
      7.0
    ],
    "cell_5": [
      1.0,
      1.0,
      0.827,
      0.827,
      4.0,
      4.0,
      0.2068,
      0.2068,
      1.0,
      1.0,
      0.1153,
      0.0,
      0.2788,
      0.2788,
      0.2068,
      0.2068,
      1.0,
      2.0,
      0.6667,
      0.0,
      0.4167,
      0.4167,
      0.8,
      0.8,
      1.0,
      1.0,
      0.1153,
      0.1034,
      0.5577,
      0.5577,
      0.2068,
      0.2068,
      1.0,
      2.0,
      0.6667,
      0.4,
      0.8333,
      0.8333,
      0.8,
      0.8,
      2.0,
      1.0,
      0.1153,
      0.1034,
      0.5577,
      0.5577,
      0.2068,
      0.2068,
      2.0,
      2.0,
      0.6667,
      0.4,
      0.8333,
      0.8333,
      0.8,
      0.8,
      2.0,
      1.0,
      0.8317,
      0.8317,
      3.9359,
      3.9359,
      0.2103,
      0.2103,
      2.0,
      0.8266,
      0.8266,
      3.9266,
      3.9266,
      0.2108,
      0.2108,
      1.0,
      1.0,
      0.2406,
      0.2202,
      0.285,
      0.285,
      0.2103,
      0.2103,
      1.0,
      2.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.2108,
      0.2108,
      1.0,
      1.0,
      0.2355,
      0.213,
      0.5454,
      0.5454,
      0.4141,
      0.4141,
      1.0,
      2.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      2.0,
      1.0,
      0.2319,
      0.2082,
      0.5466,
      0.5466,
      0.4211,
      0.4211,
      2.0,
      2.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      23000.0,
      1.0
    ]
  },
  "metadata": {
    "notebook_path": "forkJoin/fj_cs_postfork.ipynb",
    "source_dir": "examples/basic",
    "total_cells": 6,
    "code_cells": 6,
    "generation_info": {
      "script_version": "2.0",
      "extraction_method": "comprehensive"
    }
  }
}